import{C as X,N as D,Q as me,T as ye,U as ie,a as Y,l as pe,r as ve}from"./chunk-BG64RAJO.mjs";import{c as R,d as U}from"./chunk-OIST4OYN.mjs";function ge(A){let k=ye({state:Object.freeze({...A})}),p=u=>{typeof u=="function"&&(u=u(k.state)),k.state=Object.freeze({...k.state,...u})},e=typeof A=="object"?Object.freeze({...A}):A,l=new Set,s=u=>{typeof u=="function"&&(u=u(e)),e=typeof u=="object"?Object.freeze({...e,...u}):u,l.forEach(r=>r(e))};function o(){let[u,r]=ve(e);return pe(()=>(l.add(r),()=>l.delete(r)),[]),ie()===!0?(ie(),[k.state,p]):[u,s]}return o}var Me={display:"flex",justifyContent:"center",alignItems:"center"};var Ve={...Me,overflow:"hidden"};var ee=()=>"#"+Math.floor(Math.random()*16777215).toString(16);var he=ge({partyMode:!1,intervals:[]}),xe;function We(A){return k=>{let[p,e]=he(),[l,s]=Y.useState(ee());return Y.useEffect(()=>{if(p.partyMode){xe=setInterval(()=>{s(ee())},Math.floor(Math.random()*(650-450)+450));let u=p.intervals;u.push(xe),e({intervals:u})}else{var o;(o=p.intervals)===null||o===void 0||o.forEach((u,r)=>{clearInterval(u)})}},[p.partyMode]),X(A,{...k,animate:{background:l},draggable:"false",onMouseDown:()=>{s(ee())},onDragStart:()=>!1})}}function He(A){return k=>{let[p,e]=he();return X(A,{...k,animate:{backgroundColor:p.partyMode?"#0F0F0F":"#FCFCFC"},transition:{default:{ease:"ease-in-out",duration:0,delay:.1}}})}}var be=typeof globalThis<"u"?globalThis:typeof self<"u"?self:U,te={};(function(k,p){te=p()})(0,function(){return function(A){var k={};function p(e){if(k[e])return k[e].exports;var l=k[e]={i:e,l:!1,exports:{}};return A[e].call(l.exports,l,l.exports,p),l.l=!0,l.exports}return p.m=A,p.c=k,p.d=function(e,l,s){p.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:s})},p.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.t=function(e,l){if(1&l&&(e=p(e)),8&l||4&l&&typeof e=="object"&&e&&e.__esModule)return e;var s=Object.create(null);if(p.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&l&&typeof e!="string")for(var o in e)p.d(s,o,function(u){return e[u]}.bind(null,o));return s},p.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(l,"a",l),l},p.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},p.p="",p(p.s=21)}([function(A,k){var p={};A.exports=p,function(){p._nextId=0,p._seed=0,p._nowStartTime=+new Date,p._warnedOnce={},p._decomp=null,p.extend=function(l,s){var o,u;typeof s=="boolean"?(o=2,u=s):(o=1,u=!0);for(var r=o;r<arguments.length;r++){var c=arguments[r];if(c)for(var i in c)u&&c[i]&&c[i].constructor===Object?l[i]&&l[i].constructor!==Object?l[i]=c[i]:(l[i]=l[i]||{},p.extend(l[i],u,c[i])):l[i]=c[i]}return l},p.clone=function(l,s){return p.extend({},s,l)},p.keys=function(l){if(Object.keys)return Object.keys(l);var s=[];for(var o in l)s.push(o);return s},p.values=function(l){var s=[];if(Object.keys){for(var o=Object.keys(l),u=0;u<o.length;u++)s.push(l[o[u]]);return s}for(var r in l)s.push(l[r]);return s},p.get=function(l,s,o,u){s=s.split(".").slice(o,u);for(var r=0;r<s.length;r+=1)l=l[s[r]];return l},p.set=function(l,s,o,u,r){var c=s.split(".").slice(u,r);return p.get(l,s,0,-1)[c[c.length-1]]=o,o},p.shuffle=function(l){for(var s=l.length-1;s>0;s--){var o=Math.floor(p.random()*(s+1)),u=l[s];l[s]=l[o],l[o]=u}return l},p.choose=function(l){return l[Math.floor(p.random()*l.length)]},p.isElement=function(l){return typeof HTMLElement<"u"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},p.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},p.isFunction=function(l){return typeof l=="function"},p.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},p.isString=function(l){return toString.call(l)==="[object String]"},p.clamp=function(l,s,o){return l<s?s:l>o?o:l},p.sign=function(l){return l<0?-1:1},p.now=function(){if(typeof R<"u"&&R.performance){if(R.performance.now)return R.performance.now();if(R.performance.webkitNow)return R.performance.webkitNow()}return Date.now?Date.now():new Date-p._nowStartTime},p.random=function(l,s){return l=typeof l<"u"?l:0,s=typeof s<"u"?s:1,l+e()*(s-l)};var e=function(){return p._seed=(9301*p._seed+49297)%233280,p._seed/233280};p.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},p.logLevel=1,p.log=function(){console&&p.logLevel>0&&p.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},p.info=function(){console&&p.logLevel>0&&p.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},p.warn=function(){console&&p.logLevel>0&&p.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},p.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");p._warnedOnce[l]||(p.warn(l),p._warnedOnce[l]=!0)},p.deprecated=function(l,s,o){l[s]=p.chain(function(){p.warnOnce("\u{1F505} deprecated \u{1F505}",o)},l[s])},p.nextId=function(){return p._nextId++},p.indexOf=function(l,s){if(l.indexOf)return l.indexOf(s);for(var o=0;o<l.length;o++)if(l[o]===s)return o;return-1},p.map=function(l,s){if(l.map)return l.map(s);for(var o=[],u=0;u<l.length;u+=1)o.push(s(l[u]));return o},p.topologicalSort=function(l){var s=[],o=[],u=[];for(var r in l)o[r]||u[r]||p._topologicalSort(r,o,u,l,s);return s},p._topologicalSort=function(l,s,o,u,r){var c=u[l]||[];o[l]=!0;for(var i=0;i<c.length;i+=1){var t=c[i];o[t]||s[t]||p._topologicalSort(t,s,o,u,r)}o[l]=!1,s[l]=!0,r.push(l)},p.chain=function(){for(var l=[],s=0;s<arguments.length;s+=1){var o=arguments[s];o._chained?l.push.apply(l,o._chained):l.push(o)}var u=function(){for(var r,c=new Array(arguments.length),i=0,t=arguments.length;i<t;i++)c[i]=arguments[i];for(i=0;i<l.length;i+=1){var n=l[i].apply(r,c);typeof n<"u"&&(r=n)}return r};return u._chained=l,u},p.chainPathBefore=function(l,s,o){return p.set(l,s,p.chain(o,p.get(l,s)))},p.chainPathAfter=function(l,s,o){return p.set(l,s,p.chain(p.get(l,s),o))},p.setDecomp=function(l){p._decomp=l},p.getDecomp=function(){var l=p._decomp;try{l||typeof R>"u"||(l=R.decomp),l||typeof be>"u"||(l=be.decomp)}catch{l=null}return l}}()},function(A,k){var p={};A.exports=p,function(){p.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&p.update(l,e),l},p.update=function(e,l,s){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var o=0;o<l.length;o++){var u=l[o];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}s&&(s.x>0?e.max.x+=s.x:e.min.x+=s.x,s.y>0?e.max.y+=s.y:e.min.y+=s.y)},p.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},p.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},p.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},p.shift=function(e,l){var s=e.max.x-e.min.x,o=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+s,e.min.y=l.y,e.max.y=l.y+o}}()},function(A,k){var p={};A.exports=p,function(){p.create=function(e,l){return{x:e||0,y:l||0}},p.clone=function(e){return{x:e.x,y:e.y}},p.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},p.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},p.rotate=function(e,l,s){var o=Math.cos(l),u=Math.sin(l);s||(s={});var r=e.x*o-e.y*u;return s.y=e.x*u+e.y*o,s.x=r,s},p.rotateAbout=function(e,l,s,o){var u=Math.cos(l),r=Math.sin(l);o||(o={});var c=s.x+((e.x-s.x)*u-(e.y-s.y)*r);return o.y=s.y+((e.x-s.x)*r+(e.y-s.y)*u),o.x=c,o},p.normalise=function(e){var l=p.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},p.dot=function(e,l){return e.x*l.x+e.y*l.y},p.cross=function(e,l){return e.x*l.y-e.y*l.x},p.cross3=function(e,l,s){return(l.x-e.x)*(s.y-e.y)-(l.y-e.y)*(s.x-e.x)},p.add=function(e,l,s){return s||(s={}),s.x=e.x+l.x,s.y=e.y+l.y,s},p.sub=function(e,l,s){return s||(s={}),s.x=e.x-l.x,s.y=e.y-l.y,s},p.mult=function(e,l){return{x:e.x*l,y:e.y*l}},p.div=function(e,l){return{x:e.x/l,y:e.y/l}},p.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},p.neg=function(e){return{x:-e.x,y:-e.y}},p.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},p._temp=[p.create(),p.create(),p.create(),p.create(),p.create(),p.create()]}()},function(A,k,p){var e={};A.exports=e;var l=p(2),s=p(0);(function(){e.create=function(o,u){for(var r=[],c=0;c<o.length;c++){var i=o[c],t={x:i.x,y:i.y,index:c,body:u,isInternal:!1};r.push(t)}return r},e.fromPath=function(o,u){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,c=[];return o.replace(r,function(i,t,n){c.push({x:parseFloat(t),y:parseFloat(n)})}),e.create(c,u)},e.centre=function(o){for(var u,r,c,i=e.area(o,!0),t={x:0,y:0},n=0;n<o.length;n++)c=(n+1)%o.length,u=l.cross(o[n],o[c]),r=l.mult(l.add(o[n],o[c]),u),t=l.add(t,r);return l.div(t,6*i)},e.mean=function(o){for(var u={x:0,y:0},r=0;r<o.length;r++)u.x+=o[r].x,u.y+=o[r].y;return l.div(u,o.length)},e.area=function(o,u){for(var r=0,c=o.length-1,i=0;i<o.length;i++)r+=(o[c].x-o[i].x)*(o[c].y+o[i].y),c=i;return u?r/2:Math.abs(r)/2},e.inertia=function(o,u){for(var r,c,i=0,t=0,n=o,a=0;a<n.length;a++)c=(a+1)%n.length,r=Math.abs(l.cross(n[c],n[a])),i+=r*(l.dot(n[c],n[c])+l.dot(n[c],n[a])+l.dot(n[a],n[a])),t+=r;return u/6*(i/t)},e.translate=function(o,u,r){r=typeof r<"u"?r:1;var c,i=o.length,t=u.x*r,n=u.y*r;for(c=0;c<i;c++)o[c].x+=t,o[c].y+=n;return o},e.rotate=function(o,u,r){if(u!==0){var c,i,t,n,a=Math.cos(u),f=Math.sin(u),g=r.x,h=r.y,w=o.length;for(n=0;n<w;n++)c=o[n],i=c.x-g,t=c.y-h,c.x=g+(i*a-t*f),c.y=h+(i*f+t*a);return o}},e.contains=function(o,u){for(var r,c=u.x,i=u.y,t=o.length,n=o[t-1],a=0;a<t;a++){if(r=o[a],(c-n.x)*(r.y-n.y)+(i-n.y)*(n.x-r.x)>0)return!1;n=r}return!0},e.scale=function(o,u,r,c){if(u===1&&r===1)return o;c=c||e.centre(o);for(var i,t,n=0;n<o.length;n++)i=o[n],t=l.sub(i,c),o[n].x=c.x+t.x*u,o[n].y=c.y+t.y*r;return o},e.chamfer=function(o,u,r,c,i){u=typeof u=="number"?[u]:u||[8],r=typeof r<"u"?r:-1,c=c||2,i=i||14;for(var t=[],n=0;n<o.length;n++){var a=o[n-1>=0?n-1:o.length-1],f=o[n],g=o[(n+1)%o.length],h=u[n<u.length?n:u.length-1];if(h!==0){var w=l.normalise({x:f.y-a.y,y:a.x-f.x}),d=l.normalise({x:g.y-f.y,y:f.x-g.x}),m=Math.sqrt(2*Math.pow(h,2)),y=l.mult(s.clone(w),h),v=l.normalise(l.mult(l.add(w,d),.5)),x=l.sub(f,l.mult(v,m)),b=r;r===-1&&(b=1.75*Math.pow(h,.32)),b=s.clamp(b,c,i),b%2===1&&(b+=1);for(var C=Math.acos(l.dot(w,d)),S=C/b,P=0;P<b;P++)t.push(l.add(l.rotate(y,S*P),x))}else t.push(f)}return t},e.clockwiseSort=function(o){var u=e.mean(o);return o.sort(function(r,c){return l.angle(u,r)-l.angle(u,c)}),o},e.isConvex=function(o){var u,r,c,i,t=0,n=o.length;if(n<3)return null;for(u=0;u<n;u++)if(r=(u+1)%n,c=(u+2)%n,i=(o[r].x-o[u].x)*(o[c].y-o[r].y),i-=(o[r].y-o[u].y)*(o[c].x-o[r].x),i<0?t|=1:i>0&&(t|=2),t===3)return!1;return t!==0||null},e.hull=function(o){var u,r,c=[],i=[];for(o=o.slice(0),o.sort(function(t,n){var a=t.x-n.x;return a!==0?a:t.y-n.y}),r=0;r<o.length;r+=1){for(u=o[r];i.length>=2&&l.cross3(i[i.length-2],i[i.length-1],u)<=0;)i.pop();i.push(u)}for(r=o.length-1;r>=0;r-=1){for(u=o[r];c.length>=2&&l.cross3(c[c.length-2],c[c.length-1],u)<=0;)c.pop();c.push(u)}return c.pop(),i.pop(),c.concat(i)}})()},function(A,k,p){var e={};A.exports=e;var l=p(0);(function(){e.on=function(s,o,u){for(var r,c=o.split(" "),i=0;i<c.length;i++)r=c[i],s.events=s.events||{},s.events[r]=s.events[r]||[],s.events[r].push(u);return u},e.off=function(s,o,u){if(o){typeof o=="function"&&(u=o,o=l.keys(s.events).join(" "));for(var r=o.split(" "),c=0;c<r.length;c++){var i=s.events[r[c]],t=[];if(u&&i)for(var n=0;n<i.length;n++)i[n]!==u&&t.push(i[n]);s.events[r[c]]=t}}else s.events={}},e.trigger=function(s,o,u){var r,c,i,t,n=s.events;if(n&&l.keys(n).length>0){u||(u={}),r=o.split(" ");for(var a=0;a<r.length;a++)if(c=r[a],i=n[c],i){t=l.clone(u,!1),t.name=c,t.source=s;for(var f=0;f<i.length;f++)i[f].apply(s,[t])}}}})()},function(A,k,p){var e={};A.exports=e;var l=p(4),s=p(0),o=p(1),u=p(6);(function(){e.create=function(r){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},e.setModified=function(r,c,i,t){if(r.isModified=c,c&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),i&&r.parent&&e.setModified(r.parent,c,i,t),t)for(var n=0;n<r.composites.length;n++){var a=r.composites[n];e.setModified(a,c,i,t)}},e.add=function(r,c){var i=[].concat(c);l.trigger(r,"beforeAdd",{object:c});for(var t=0;t<i.length;t++){var n=i[t];switch(n.type){case"body":if(n.parent!==n){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(r,n);break;case"constraint":e.addConstraint(r,n);break;case"composite":e.addComposite(r,n);break;case"mouseConstraint":e.addConstraint(r,n.constraint);break}}return l.trigger(r,"afterAdd",{object:c}),r},e.remove=function(r,c,i){var t=[].concat(c);l.trigger(r,"beforeRemove",{object:c});for(var n=0;n<t.length;n++){var a=t[n];switch(a.type){case"body":e.removeBody(r,a,i);break;case"constraint":e.removeConstraint(r,a,i);break;case"composite":e.removeComposite(r,a,i);break;case"mouseConstraint":e.removeConstraint(r,a.constraint);break}}return l.trigger(r,"afterRemove",{object:c}),r},e.addComposite=function(r,c){return r.composites.push(c),c.parent=r,e.setModified(r,!0,!0,!1),r},e.removeComposite=function(r,c,i){var t=s.indexOf(r.composites,c);if(t!==-1&&e.removeCompositeAt(r,t),i)for(var n=0;n<r.composites.length;n++)e.removeComposite(r.composites[n],c,!0);return r},e.removeCompositeAt=function(r,c){return r.composites.splice(c,1),e.setModified(r,!0,!0,!1),r},e.addBody=function(r,c){return r.bodies.push(c),e.setModified(r,!0,!0,!1),r},e.removeBody=function(r,c,i){var t=s.indexOf(r.bodies,c);if(t!==-1&&e.removeBodyAt(r,t),i)for(var n=0;n<r.composites.length;n++)e.removeBody(r.composites[n],c,!0);return r},e.removeBodyAt=function(r,c){return r.bodies.splice(c,1),e.setModified(r,!0,!0,!1),r},e.addConstraint=function(r,c){return r.constraints.push(c),e.setModified(r,!0,!0,!1),r},e.removeConstraint=function(r,c,i){var t=s.indexOf(r.constraints,c);if(t!==-1&&e.removeConstraintAt(r,t),i)for(var n=0;n<r.composites.length;n++)e.removeConstraint(r.composites[n],c,!0);return r},e.removeConstraintAt=function(r,c){return r.constraints.splice(c,1),e.setModified(r,!0,!0,!1),r},e.clear=function(r,c,i){if(i)for(var t=0;t<r.composites.length;t++)e.clear(r.composites[t],c,!0);return c?r.bodies=r.bodies.filter(function(n){return n.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,e.setModified(r,!0,!0,!1),r},e.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var c=[].concat(r.bodies),i=0;i<r.composites.length;i++)c=c.concat(e.allBodies(r.composites[i]));return r.cache&&(r.cache.allBodies=c),c},e.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var c=[].concat(r.constraints),i=0;i<r.composites.length;i++)c=c.concat(e.allConstraints(r.composites[i]));return r.cache&&(r.cache.allConstraints=c),c},e.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var c=[].concat(r.composites),i=0;i<r.composites.length;i++)c=c.concat(e.allComposites(r.composites[i]));return r.cache&&(r.cache.allComposites=c),c},e.get=function(r,c,i){var t,n;switch(i){case"body":t=e.allBodies(r);break;case"constraint":t=e.allConstraints(r);break;case"composite":t=e.allComposites(r).concat(r);break}return t?(n=t.filter(function(a){return a.id.toString()===c.toString()}),n.length===0?null:n[0]):null},e.move=function(r,c,i){return e.remove(r,c),e.add(i,c),r},e.rebase=function(r){for(var c=e.allBodies(r).concat(e.allConstraints(r)).concat(e.allComposites(r)),i=0;i<c.length;i++)c[i].id=s.nextId();return r},e.translate=function(r,c,i){for(var t=i?e.allBodies(r):r.bodies,n=0;n<t.length;n++)u.translate(t[n],c);return r},e.rotate=function(r,c,i,t){for(var n=Math.cos(c),a=Math.sin(c),f=t?e.allBodies(r):r.bodies,g=0;g<f.length;g++){var h=f[g],w=h.position.x-i.x,d=h.position.y-i.y;u.setPosition(h,{x:i.x+(w*n-d*a),y:i.y+(w*a+d*n)}),u.rotate(h,c)}return r},e.scale=function(r,c,i,t,n){for(var a=n?e.allBodies(r):r.bodies,f=0;f<a.length;f++){var g=a[f],h=g.position.x-t.x,w=g.position.y-t.y;u.setPosition(g,{x:t.x+h*c,y:t.y+w*i}),u.scale(g,c,i)}return r},e.bounds=function(r){for(var c=e.allBodies(r),i=[],t=0;t<c.length;t+=1){var n=c[t];i.push(n.bounds.min,n.bounds.max)}return o.create(i)}})()},function(A,k,p){var e={};A.exports=e;var l=p(3),s=p(2),o=p(7);p(16);var u=p(0),r=p(1),c=p(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var n={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},a=u.extend(n,t);return i(a,t),a},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var i=function(t,n){n=n||{},e.set(t,{bounds:t.bounds||r.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),c.rotate(t.axes,t.angle),r.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:n.axes||t.axes,area:n.area||t.area,mass:n.mass||t.mass,inertia:n.inertia||t.inertia});var a=t.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),f=t.isStatic?"#555":"#ccc",g=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||f,t.render.lineWidth=t.render.lineWidth||g,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,n,a){var f;typeof n=="string"&&(f=n,n={},n[f]=a);for(f in n)if(Object.prototype.hasOwnProperty.call(n,f))switch(a=n[f],f){case"isStatic":e.setStatic(t,a);break;case"isSleeping":o.set(t,a);break;case"mass":e.setMass(t,a);break;case"density":e.setDensity(t,a);break;case"inertia":e.setInertia(t,a);break;case"vertices":e.setVertices(t,a);break;case"position":e.setPosition(t,a);break;case"angle":e.setAngle(t,a);break;case"velocity":e.setVelocity(t,a);break;case"angularVelocity":e.setAngularVelocity(t,a);break;case"parts":e.setParts(t,a);break;case"centre":e.setCentre(t,a);break;default:t[f]=a}},e.setStatic=function(t,n){for(var a=0;a<t.parts.length;a++){var f=t.parts[a];f.isStatic=n,n?(f._original={restitution:f.restitution,friction:f.friction,mass:f.mass,inertia:f.inertia,density:f.density,inverseMass:f.inverseMass,inverseInertia:f.inverseInertia},f.restitution=0,f.friction=1,f.mass=f.inertia=f.density=1/0,f.inverseMass=f.inverseInertia=0,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.anglePrev=f.angle,f.angularVelocity=0,f.speed=0,f.angularSpeed=0,f.motion=0):f._original&&(f.restitution=f._original.restitution,f.friction=f._original.friction,f.mass=f._original.mass,f.inertia=f._original.inertia,f.density=f._original.density,f.inverseMass=f._original.inverseMass,f.inverseInertia=f._original.inverseInertia,f._original=null)}},e.setMass=function(t,n){var a=t.inertia/(t.mass/6);t.inertia=a*(n/6),t.inverseInertia=1/t.inertia,t.mass=n,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,n){e.setMass(t,n*t.area),t.density=n},e.setInertia=function(t,n){t.inertia=n,t.inverseInertia=1/t.inertia},e.setVertices=function(t,n){n[0].body===t?t.vertices=n:t.vertices=l.create(n,t),t.axes=c.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var a=l.centre(t.vertices);l.translate(t.vertices,a,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),r.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,n,a){var f;for(n=n.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,f=0;f<n.length;f++){var g=n[f];g!==t&&(g.parent=t,t.parts.push(g))}if(t.parts.length!==1){if(a=typeof a>"u"||a,a){var h=[];for(f=0;f<n.length;f++)h=h.concat(n[f].vertices);l.clockwiseSort(h);var w=l.hull(h),d=l.centre(w);e.setVertices(t,w),l.translate(t.vertices,d)}var m=e._totalProperties(t);t.area=m.area,t.parent=t,t.position.x=m.centre.x,t.position.y=m.centre.y,t.positionPrev.x=m.centre.x,t.positionPrev.y=m.centre.y,e.setMass(t,m.mass),e.setInertia(t,m.inertia),e.setPosition(t,m.centre)}},e.setCentre=function(t,n,a){a?(t.positionPrev.x+=n.x,t.positionPrev.y+=n.y,t.position.x+=n.x,t.position.y+=n.y):(t.positionPrev.x=n.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=n.y-(t.position.y-t.positionPrev.y),t.position.x=n.x,t.position.y=n.y)},e.setPosition=function(t,n){var a=s.sub(n,t.position);t.positionPrev.x+=a.x,t.positionPrev.y+=a.y;for(var f=0;f<t.parts.length;f++){var g=t.parts[f];g.position.x+=a.x,g.position.y+=a.y,l.translate(g.vertices,a),r.update(g.bounds,g.vertices,t.velocity)}},e.setAngle=function(t,n){var a=n-t.angle;t.anglePrev+=a;for(var f=0;f<t.parts.length;f++){var g=t.parts[f];g.angle+=a,l.rotate(g.vertices,a,t.position),c.rotate(g.axes,a),r.update(g.bounds,g.vertices,t.velocity),f>0&&s.rotateAbout(g.position,a,t.position,g.position)}},e.setVelocity=function(t,n){t.positionPrev.x=t.position.x-n.x,t.positionPrev.y=t.position.y-n.y,t.velocity.x=n.x,t.velocity.y=n.y,t.speed=s.magnitude(t.velocity)},e.setAngularVelocity=function(t,n){t.anglePrev=t.angle-n,t.angularVelocity=n,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,n){e.setPosition(t,s.add(t.position,n))},e.rotate=function(t,n,a){if(a){var f=Math.cos(n),g=Math.sin(n),h=t.position.x-a.x,w=t.position.y-a.y;e.setPosition(t,{x:a.x+(h*f-w*g),y:a.y+(h*g+w*f)}),e.setAngle(t,t.angle+n)}else e.setAngle(t,t.angle+n)},e.scale=function(t,n,a,f){var g=0,h=0;f=f||t.position;for(var w=0;w<t.parts.length;w++){var d=t.parts[w];l.scale(d.vertices,n,a,f),d.axes=c.fromVertices(d.vertices),d.area=l.area(d.vertices),e.setMass(d,t.density*d.area),l.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),e.setInertia(d,e._inertiaScale*l.inertia(d.vertices,d.mass)),l.translate(d.vertices,{x:d.position.x,y:d.position.y}),w>0&&(g+=d.area,h+=d.inertia),d.position.x=f.x+(d.position.x-f.x)*n,d.position.y=f.y+(d.position.y-f.y)*a,r.update(d.bounds,d.vertices,t.velocity)}t.parts.length>1&&(t.area=g,t.isStatic||(e.setMass(t,t.density*g),e.setInertia(t,h))),t.circleRadius&&(n===a?t.circleRadius*=n:t.circleRadius=null)},e.update=function(t,n,a,f){var g=Math.pow(n*a*t.timeScale,2),h=1-t.frictionAir*a*t.timeScale,w=t.position.x-t.positionPrev.x,d=t.position.y-t.positionPrev.y;t.velocity.x=w*h*f+t.force.x/t.mass*g,t.velocity.y=d*h*f+t.force.y/t.mass*g,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*h*f+t.torque/t.inertia*g,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=s.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var m=0;m<t.parts.length;m++){var y=t.parts[m];l.translate(y.vertices,t.velocity),m>0&&(y.position.x+=t.velocity.x,y.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(y.vertices,t.angularVelocity,t.position),c.rotate(y.axes,t.angularVelocity),m>0&&s.rotateAbout(y.position,t.angularVelocity,t.position,y.position)),r.update(y.bounds,y.vertices,t.velocity)}},e.applyForce=function(t,n,a){t.force.x+=a.x,t.force.y+=a.y;var f={x:n.x-t.position.x,y:n.y-t.position.y};t.torque+=f.x*a.y-f.y*a.x},e._totalProperties=function(t){for(var n={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var f=t.parts[a],g=f.mass!==1/0?f.mass:1;n.mass+=g,n.area+=f.area,n.inertia+=f.inertia,n.centre=s.add(n.centre,s.mult(f.position,g))}return n.centre=s.div(n.centre,n.mass),n}})()},function(A,k,p){var e={};A.exports=e;var l=p(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(s,o){for(var u=o*o*o,r=0;r<s.length;r++){var c=s[r],i=c.speed*c.speed+c.angularSpeed*c.angularSpeed;if(c.force.x===0&&c.force.y===0){var t=Math.min(c.motion,i),n=Math.max(c.motion,i);c.motion=e._minBias*t+(1-e._minBias)*n,c.sleepThreshold>0&&c.motion<e._motionSleepThreshold*u?(c.sleepCounter+=1,c.sleepCounter>=c.sleepThreshold&&e.set(c,!0)):c.sleepCounter>0&&(c.sleepCounter-=1)}else e.set(c,!1)}},e.afterCollisions=function(s,o){for(var u=o*o*o,r=0;r<s.length;r++){var c=s[r];if(c.isActive){var i=c.collision,t=i.bodyA.parent,n=i.bodyB.parent;if(!(t.isSleeping&&n.isSleeping||t.isStatic||n.isStatic)&&(t.isSleeping||n.isSleeping)){var a=t.isSleeping&&!t.isStatic?t:n,f=a===t?n:t;!a.isStatic&&f.motion>e._motionWakeThreshold*u&&e.set(a,!1)}}}},e.set=function(s,o){var u=s.isSleeping;o?(s.isSleeping=!0,s.sleepCounter=s.sleepThreshold,s.positionImpulse.x=0,s.positionImpulse.y=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.speed=0,s.angularSpeed=0,s.motion=0,u||l.trigger(s,"sleepStart")):(s.isSleeping=!1,s.sleepCounter=0,u&&l.trigger(s,"sleepEnd"))}})()},function(A,k,p){var e={};A.exports=e;var l=p(3),s=p(9);(function(){var o=[],u={overlap:0,axis:null},r={overlap:0,axis:null};e.create=function(c,i){return{pair:null,collided:!1,bodyA:c,bodyB:i,parentA:c.parent,parentB:i.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(c,i,t){if(e._overlapAxes(u,c.vertices,i.vertices,c.axes),u.overlap<=0||(e._overlapAxes(r,i.vertices,c.vertices,i.axes),r.overlap<=0))return null;var n,a=t&&t.table[s.id(c,i)];a?n=a.collision:(n=e.create(c,i),n.collided=!0,n.bodyA=c.id<i.id?c:i,n.bodyB=c.id<i.id?i:c,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent),c=n.bodyA,i=n.bodyB;var f;f=u.overlap<r.overlap?u:r;var g=n.normal,h=n.supports,w=f.axis,d=w.x,m=w.y;d*(i.position.x-c.position.x)+m*(i.position.y-c.position.y)<0?(g.x=d,g.y=m):(g.x=-d,g.y=-m),n.tangent.x=-g.y,n.tangent.y=g.x,n.depth=f.overlap,n.penetration.x=g.x*n.depth,n.penetration.y=g.y*n.depth;var y=e._findSupports(c,i,g,1),v=0;if(l.contains(c.vertices,y[0])&&(h[v++]=y[0]),l.contains(c.vertices,y[1])&&(h[v++]=y[1]),v<2){var x=e._findSupports(i,c,g,-1);l.contains(i.vertices,x[0])&&(h[v++]=x[0]),v<2&&l.contains(i.vertices,x[1])&&(h[v++]=x[1])}return v===0&&(h[v++]=y[0]),h.length=v,n},e._overlapAxes=function(c,i,t,n){var a,f,g,h,w,d,m=i.length,y=t.length,v=i[0].x,x=i[0].y,b=t[0].x,C=t[0].y,S=n.length,P=Number.MAX_VALUE,_=0;for(w=0;w<S;w++){var M=n[w],B=M.x,I=M.y,T=v*B+x*I,E=b*B+C*I,V=T,L=E;for(d=1;d<m;d+=1)h=i[d].x*B+i[d].y*I,h>V?V=h:h<T&&(T=h);for(d=1;d<y;d+=1)h=t[d].x*B+t[d].y*I,h>L?L=h:h<E&&(E=h);if(f=V-E,g=L-T,a=f<g?f:g,a<P&&(P=a,_=w,a<=0))break}c.axis=n[_],c.overlap=P},e._projectToAxis=function(c,i,t){for(var n=i[0].x*t.x+i[0].y*t.y,a=n,f=1;f<i.length;f+=1){var g=i[f].x*t.x+i[f].y*t.y;g>a?a=g:g<n&&(n=g)}c.min=n,c.max=a},e._findSupports=function(c,i,t,n){var a,f,g,h,w,d=i.vertices,m=d.length,y=c.position.x,v=c.position.y,x=t.x*n,b=t.y*n,C=Number.MAX_VALUE;for(w=0;w<m;w+=1)f=d[w],h=x*(y-f.x)+b*(v-f.y),h<C&&(C=h,a=f);return g=d[(m+a.index-1)%m],C=x*(y-g.x)+b*(v-g.y),f=d[(a.index+1)%m],x*(y-f.x)+b*(v-f.y)<C?(o[0]=a,o[1]=f,o):(o[0]=a,o[1]=g,o)}})()},function(A,k,p){var e={};A.exports=e;var l=p(17);(function(){e.create=function(s,o){var u=s.bodyA,r=s.bodyB,c={id:e.id(u,r),bodyA:u,bodyB:r,collision:s,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:u.isSensor||r.isSensor,timeCreated:o,timeUpdated:o,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(c,s,o),c},e.update=function(s,o,u){var r=s.contacts,c=o.supports,i=s.activeContacts,t=o.parentA,n=o.parentB,a=t.vertices.length;s.isActive=!0,s.timeUpdated=u,s.collision=o,s.separation=o.depth,s.inverseMass=t.inverseMass+n.inverseMass,s.friction=t.friction<n.friction?t.friction:n.friction,s.frictionStatic=t.frictionStatic>n.frictionStatic?t.frictionStatic:n.frictionStatic,s.restitution=t.restitution>n.restitution?t.restitution:n.restitution,s.slop=t.slop>n.slop?t.slop:n.slop,o.pair=s,i.length=0;for(var f=0;f<c.length;f++){var g=c[f],h=g.body===t?g.index:a+g.index,w=r[h];w?i.push(w):i.push(r[h]=l.create(g))}},e.setActive=function(s,o,u){o?(s.isActive=!0,s.timeUpdated=u):(s.isActive=!1,s.activeContacts.length=0)},e.id=function(s,o){return s.id<o.id?"A"+s.id+"B"+o.id:"A"+o.id+"B"+s.id}})()},function(A,k,p){var e={};A.exports=e;var l=p(3),s=p(2),o=p(7),u=p(1),r=p(11),c=p(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(i){var t=i;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?s.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?s.add(t.bodyB.position,t.pointB):t.pointB,f=s.magnitude(s.sub(n,a));t.length=typeof t.length<"u"?t.length:f,t.id=t.id||c.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var g={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(g.type="pin",g.anchors=!1):t.stiffness<.9&&(g.type="spring"),t.render=c.extend(g,t.render),t},e.preSolveAll=function(i){for(var t=0;t<i.length;t+=1){var n=i[t],a=n.constraintImpulse;n.isStatic||a.x===0&&a.y===0&&a.angle===0||(n.position.x+=a.x,n.position.y+=a.y,n.angle+=a.angle)}},e.solveAll=function(i,t){for(var n=0;n<i.length;n+=1){var a=i[n],f=!a.bodyA||a.bodyA&&a.bodyA.isStatic,g=!a.bodyB||a.bodyB&&a.bodyB.isStatic;(f||g)&&e.solve(i[n],t)}for(n=0;n<i.length;n+=1)a=i[n],f=!a.bodyA||a.bodyA&&a.bodyA.isStatic,g=!a.bodyB||a.bodyB&&a.bodyB.isStatic,f||g||e.solve(i[n],t)},e.solve=function(i,t){var n=i.bodyA,a=i.bodyB,f=i.pointA,g=i.pointB;if(n||a){n&&!n.isStatic&&(s.rotate(f,n.angle-i.angleA,f),i.angleA=n.angle),a&&!a.isStatic&&(s.rotate(g,a.angle-i.angleB,g),i.angleB=a.angle);var h=f,w=g;if(n&&(h=s.add(n.position,f)),a&&(w=s.add(a.position,g)),h&&w){var d=s.sub(h,w),m=s.magnitude(d);m<e._minLength&&(m=e._minLength);var y,v,x,b,C,S=(m-i.length)/m,P=i.stiffness<1?i.stiffness*t:i.stiffness,_=s.mult(d,S*P),M=(n?n.inverseMass:0)+(a?a.inverseMass:0),B=(n?n.inverseInertia:0)+(a?a.inverseInertia:0),I=M+B;if(i.damping){var T=s.create();x=s.div(d,m),C=s.sub(a&&s.sub(a.position,a.positionPrev)||T,n&&s.sub(n.position,n.positionPrev)||T),b=s.dot(x,C)}n&&!n.isStatic&&(v=n.inverseMass/M,n.constraintImpulse.x-=_.x*v,n.constraintImpulse.y-=_.y*v,n.position.x-=_.x*v,n.position.y-=_.y*v,i.damping&&(n.positionPrev.x-=i.damping*x.x*b*v,n.positionPrev.y-=i.damping*x.y*b*v),y=s.cross(f,_)/I*e._torqueDampen*n.inverseInertia*(1-i.angularStiffness),n.constraintImpulse.angle-=y,n.angle-=y),a&&!a.isStatic&&(v=a.inverseMass/M,a.constraintImpulse.x+=_.x*v,a.constraintImpulse.y+=_.y*v,a.position.x+=_.x*v,a.position.y+=_.y*v,i.damping&&(a.positionPrev.x+=i.damping*x.x*b*v,a.positionPrev.y+=i.damping*x.y*b*v),y=s.cross(g,_)/I*e._torqueDampen*a.inverseInertia*(1-i.angularStiffness),a.constraintImpulse.angle+=y,a.angle+=y)}}},e.postSolveAll=function(i){for(var t=0;t<i.length;t++){var n=i[t],a=n.constraintImpulse;if(!(n.isStatic||a.x===0&&a.y===0&&a.angle===0)){o.set(n,!1);for(var f=0;f<n.parts.length;f++){var g=n.parts[f];l.translate(g.vertices,a),f>0&&(g.position.x+=a.x,g.position.y+=a.y),a.angle!==0&&(l.rotate(g.vertices,a.angle,n.position),r.rotate(g.axes,a.angle),f>0&&s.rotateAbout(g.position,a.angle,n.position,g.position)),u.update(g.bounds,g.vertices,n.velocity)}a.angle*=e._warming,a.x*=e._warming,a.y*=e._warming}}},e.pointAWorld=function(i){return{x:(i.bodyA?i.bodyA.position.x:0)+i.pointA.x,y:(i.bodyA?i.bodyA.position.y:0)+i.pointA.y}},e.pointBWorld=function(i){return{x:(i.bodyB?i.bodyB.position.x:0)+i.pointB.x,y:(i.bodyB?i.bodyB.position.y:0)+i.pointB.y}}})()},function(A,k,p){var e={};A.exports=e;var l=p(2),s=p(0);(function(){e.fromVertices=function(o){for(var u={},r=0;r<o.length;r++){var c=(r+1)%o.length,i=l.normalise({x:o[c].y-o[r].y,y:o[r].x-o[c].x}),t=i.y===0?1/0:i.x/i.y;t=t.toFixed(3).toString(),u[t]=i}return s.values(u)},e.rotate=function(o,u){if(u!==0)for(var r=Math.cos(u),c=Math.sin(u),i=0;i<o.length;i++){var t,n=o[i];t=n.x*r-n.y*c,n.y=n.x*c+n.y*r,n.x=t}}})()},function(A,k,p){var e={};A.exports=e;var l=p(3),s=p(0),o=p(6),u=p(1),r=p(2);(function(){e.rectangle=function(c,i,t,n,a){a=a||{};var f={label:"Rectangle Body",position:{x:c,y:i},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+n+" L 0 "+n)};if(a.chamfer){var g=a.chamfer;f.vertices=l.chamfer(f.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete a.chamfer}return o.create(s.extend({},f,a))},e.trapezoid=function(c,i,t,n,a,f){f=f||{},a*=.5;var g=(1-2*a)*t,h,w=t*a,d=w+g,m=d+w;h=a<.5?"L 0 0 L "+w+" "+-n+" L "+d+" "+-n+" L "+m+" 0":"L 0 0 L "+d+" "+-n+" L "+m+" 0";var y={label:"Trapezoid Body",position:{x:c,y:i},vertices:l.fromPath(h)};if(f.chamfer){var v=f.chamfer;y.vertices=l.chamfer(y.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete f.chamfer}return o.create(s.extend({},y,f))},e.circle=function(c,i,t,n,a){n=n||{};var f={label:"Circle Body",circleRadius:t};a=a||25;var g=Math.ceil(Math.max(10,Math.min(a,t)));return g%2===1&&(g+=1),e.polygon(c,i,g,t,s.extend({},f,n))},e.polygon=function(c,i,t,n,a){if(a=a||{},t<3)return e.circle(c,i,n,a);for(var f=2*Math.PI/t,g="",h=.5*f,w=0;w<t;w+=1){var d=h+w*f,m=Math.cos(d)*n,y=Math.sin(d)*n;g+="L "+m.toFixed(3)+" "+y.toFixed(3)+" "}var v={label:"Polygon Body",position:{x:c,y:i},vertices:l.fromPath(g)};if(a.chamfer){var x=a.chamfer;v.vertices=l.chamfer(v.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete a.chamfer}return o.create(s.extend({},v,a))},e.fromVertices=function(c,i,t,n,a,f,g,h){var w,d,m,y,v,x,b,C,S,P,_,M=s.getDecomp();for(w=!!(M&&M.quickDecomp),n=n||{},m=[],a=typeof a<"u"&&a,f=typeof f<"u"?f:.01,g=typeof g<"u"?g:10,h=typeof h<"u"?h:.01,s.isArray(t[0])||(t=[t]),P=0;P<t.length;P+=1)if(x=t[P],y=l.isConvex(x),v=!y,v&&!w&&s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!w)x=y?l.clockwiseSort(x):l.hull(x),m.push({position:{x:c,y:i},vertices:x});else{var B=x.map(function(q){return[q.x,q.y]});M.makeCCW(B),f!==!1&&M.removeCollinearPoints(B,f),h!==!1&&M.removeDuplicatePoints&&M.removeDuplicatePoints(B,h);var I=M.quickDecomp(B);for(b=0;b<I.length;b++){var T=I[b],E=T.map(function(q){return{x:q[0],y:q[1]}});g>0&&l.area(E)<g||m.push({position:l.centre(E),vertices:E})}}for(b=0;b<m.length;b++)m[b]=o.create(s.extend(m[b],n));if(a){var V=5;for(b=0;b<m.length;b++){var L=m[b];for(C=b+1;C<m.length;C++){var F=m[C];if(u.overlaps(L.bounds,F.bounds)){var W=L.vertices,O=F.vertices;for(S=0;S<L.vertices.length;S++)for(_=0;_<F.vertices.length;_++){var G=r.magnitudeSquared(r.sub(W[(S+1)%W.length],O[_])),H=r.magnitudeSquared(r.sub(W[S],O[(_+1)%O.length]));G<V&&H<V&&(W[S].isInternal=!0,O[_].isInternal=!0)}}}}}return m.length>1?(d=o.create(s.extend({parts:m.slice(0)},n)),o.setPosition(d,{x:c,y:i}),d):m[0]}})()},function(A,k,p){var e={};A.exports=e;var l=p(0);(function(){e.create=function(s){var o={};return s||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),o.element=s||document.body,o.absolute={x:0,y:0},o.position={x:0,y:0},o.mousedownPosition={x:0,y:0},o.mouseupPosition={x:0,y:0},o.offset={x:0,y:0},o.scale={x:1,y:1},o.wheelDelta=0,o.button=-1,o.pixelRatio=parseInt(o.element.getAttribute("data-pixel-ratio"),10)||1,o.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},o.mousemove=function(u){var r=e._getRelativeMousePosition(u,o.element,o.pixelRatio),c=u.changedTouches;c&&(o.button=0,u.preventDefault()),o.absolute.x=r.x,o.absolute.y=r.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y,o.sourceEvents.mousemove=u},o.mousedown=function(u){var r=e._getRelativeMousePosition(u,o.element,o.pixelRatio),c=u.changedTouches;c?(o.button=0,u.preventDefault()):o.button=u.button,o.absolute.x=r.x,o.absolute.y=r.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y,o.mousedownPosition.x=o.position.x,o.mousedownPosition.y=o.position.y,o.sourceEvents.mousedown=u},o.mouseup=function(u){var r=e._getRelativeMousePosition(u,o.element,o.pixelRatio),c=u.changedTouches;c&&u.preventDefault(),o.button=-1,o.absolute.x=r.x,o.absolute.y=r.y,o.position.x=o.absolute.x*o.scale.x+o.offset.x,o.position.y=o.absolute.y*o.scale.y+o.offset.y,o.mouseupPosition.x=o.position.x,o.mouseupPosition.y=o.position.y,o.sourceEvents.mouseup=u},o.mousewheel=function(u){o.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault()},e.setElement(o,o.element),o},e.setElement=function(s,o){s.element=o,o.addEventListener("mousemove",s.mousemove),o.addEventListener("mousedown",s.mousedown),o.addEventListener("mouseup",s.mouseup),o.addEventListener("mousewheel",s.mousewheel),o.addEventListener("DOMMouseScroll",s.mousewheel),o.addEventListener("touchmove",s.mousemove),o.addEventListener("touchstart",s.mousedown),o.addEventListener("touchend",s.mouseup)},e.clearSourceEvents=function(s){s.sourceEvents.mousemove=null,s.sourceEvents.mousedown=null,s.sourceEvents.mouseup=null,s.sourceEvents.mousewheel=null,s.wheelDelta=0},e.setOffset=function(s,o){s.offset.x=o.x,s.offset.y=o.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e.setScale=function(s,o){s.scale.x=o.x,s.scale.y=o.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e._getRelativeMousePosition=function(s,o,u){var r,c,i=o.getBoundingClientRect(),t=document.documentElement||document.body.parentNode||document.body,n=R.pageXOffset!==void 0?R.pageXOffset:t.scrollLeft,a=R.pageYOffset!==void 0?R.pageYOffset:t.scrollTop,f=s.changedTouches;return f?(r=f[0].pageX-i.left-n,c=f[0].pageY-i.top-a):(r=s.pageX-i.left-n,c=s.pageY-i.top-a),{x:r/(o.clientWidth/(o.width||o.clientWidth)*u),y:c/(o.clientHeight/(o.height||o.clientHeight)*u)}}})()},function(A,k,p){var e={};A.exports=e;var l=p(0),s=p(8);(function(){e.create=function(o){var u={bodies:[],pairs:null};return l.extend(u,o)},e.setBodies=function(o,u){o.bodies=u.slice(0)},e.clear=function(o){o.bodies=[]},e.collisions=function(o){var u,r,c=[],i=o.pairs,t=o.bodies,n=t.length,a=e.canCollide,f=s.collides;for(t.sort(e._compareBoundsX),u=0;u<n;u++){var g=t[u],h=g.bounds,w=g.bounds.max.x,d=g.bounds.max.y,m=g.bounds.min.y,y=g.isStatic||g.isSleeping,v=g.parts.length,x=v===1;for(r=u+1;r<n;r++){var b=t[r],C=b.bounds;if(C.min.x>w)break;if(!(d<C.min.y||m>C.max.y)&&(!y||!b.isStatic&&!b.isSleeping)&&a(g.collisionFilter,b.collisionFilter)){var S=b.parts.length;if(x&&S===1){var P=f(g,b,i);P&&c.push(P)}else for(var _=v>1?1:0,M=S>1?1:0,B=_;B<v;B++){var I=g.parts[B];h=I.bounds;for(var T=M;T<S;T++){var E=b.parts[T];C=E.bounds,h.min.x>C.max.x||h.max.x<C.min.x||h.max.y<C.min.y||h.min.y>C.max.y||(P=f(I,E,i),P&&c.push(P))}}}}}return c},e.canCollide=function(o,u){return o.group===u.group&&o.group!==0?o.group>0:(o.mask&u.category)!==0&&(u.mask&o.category)!==0},e._compareBoundsX=function(o,u){return o.bounds.min.x-u.bounds.min.x}})()},function(A,k,p){var e={};A.exports=e;var l=p(0);(function(){e._registry={},e.register=function(s){if(e.isPlugin(s)||l.warn("Plugin.register:",e.toString(s),"does not implement all required fields."),s.name in e._registry){var o=e._registry[s.name],u=e.versionParse(s.version).number,r=e.versionParse(o.version).number;u>r?(l.warn("Plugin.register:",e.toString(o),"was upgraded to",e.toString(s)),e._registry[s.name]=s):u<r?l.warn("Plugin.register:",e.toString(o),"can not be downgraded to",e.toString(s)):s!==o&&l.warn("Plugin.register:",e.toString(s),"is already registered to different plugin object")}else e._registry[s.name]=s;return s},e.resolve=function(s){return e._registry[e.dependencyParse(s).name]},e.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},e.isPlugin=function(s){return s&&s.name&&s.version&&s.install},e.isUsed=function(s,o){return s.used.indexOf(o)>-1},e.isFor=function(s,o){var u=s.for&&e.dependencyParse(s.for);return!s.for||o.name===u.name&&e.versionSatisfies(o.version,u.range)},e.use=function(s,o){if(s.uses=(s.uses||[]).concat(o||[]),s.uses.length!==0){for(var u=e.dependencies(s),r=l.topologicalSort(u),c=[],i=0;i<r.length;i+=1)if(r[i]!==s.name){var t=e.resolve(r[i]);t?e.isUsed(s,t.name)||(e.isFor(t,s)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(s)+"."),t._warned=!0),t.install?t.install(s):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(c.push("\u{1F536} "+e.toString(t)),delete t._warned):c.push("\u2705 "+e.toString(t)),s.used.push(t.name)):c.push("\u274C "+r[i])}c.length>0&&l.info(c.join("  "))}else l.warn("Plugin.use:",e.toString(s),"does not specify any dependencies to install.")},e.dependencies=function(s,o){var u=e.dependencyParse(s),r=u.name;if(o=o||{},!(r in o)){s=e.resolve(s)||s,o[r]=l.map(s.uses||[],function(i){e.isPlugin(i)&&e.register(i);var t=e.dependencyParse(i),n=e.resolve(i);return n&&!e.versionSatisfies(n.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(n),"does not satisfy",e.toString(t),"used by",e.toString(u)+"."),n._warned=!0,s._warned=!0):n||(l.warn("Plugin.dependencies:",e.toString(i),"used by",e.toString(u),"could not be resolved."),s._warned=!0),t.name});for(var c=0;c<o[r].length;c+=1)e.dependencies(o[r][c],o);return o}},e.dependencyParse=function(s){if(l.isString(s)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return o.test(s)||l.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}}return{name:s.name,range:s.range||s.version}},e.versionParse=function(s){var o=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;o.test(s)||l.warn("Plugin.versionParse:",s,"is not a valid version or range.");var u=o.exec(s),r=Number(u[4]),c=Number(u[5]),i=Number(u[6]);return{isRange:!!(u[1]||u[2]),version:u[3],range:s,operator:u[1]||u[2]||"",major:r,minor:c,patch:i,parts:[r,c,i],prerelease:u[7],number:1e8*r+1e4*c+i}},e.versionSatisfies=function(s,o){o=o||"*";var u=e.versionParse(o),r=e.versionParse(s);if(u.isRange){if(u.operator==="*"||s==="*")return!0;if(u.operator===">")return r.number>u.number;if(u.operator===">=")return r.number>=u.number;if(u.operator==="~")return r.major===u.major&&r.minor===u.minor&&r.patch>=u.patch;if(u.operator==="^")return u.major>0?r.major===u.major&&r.number>=u.number:u.minor>0?r.minor===u.minor&&r.patch>=u.patch:r.patch===u.patch}return s===o||s==="*"}})()},function(A,k,p){var e={};A.exports=e;var l=p(0),s=p(5),o=p(1),u=p(4),r=p(2),c=p(13);(function(){var i,t;typeof R<"u"&&(i=R.requestAnimationFrame||R.webkitRequestAnimationFrame||R.mozRequestAnimationFrame||R.msRequestAnimationFrame||function(d){R.setTimeout(function(){d(l.now())},1e3/60)},t=R.cancelAnimationFrame||R.mozCancelAnimationFrame||R.webkitCancelAnimationFrame||R.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(d){var m={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!d.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},y=l.extend(m,d);return y.canvas&&(y.canvas.width=y.options.width||y.canvas.width,y.canvas.height=y.options.height||y.canvas.height),y.mouse=d.mouse,y.engine=d.engine,y.canvas=y.canvas||f(y.options.width,y.options.height),y.context=y.canvas.getContext("2d"),y.textures={},y.bounds=y.bounds||{min:{x:0,y:0},max:{x:y.canvas.width,y:y.canvas.height}},y.options.showBroadphase=!1,y.options.pixelRatio!==1&&e.setPixelRatio(y,y.options.pixelRatio),l.isElement(y.element)?y.element.appendChild(y.canvas):y.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),y},e.run=function(d){(function m(y){d.frameRequestId=i(m),n(d,y),e.world(d,y),(d.options.showStats||d.options.showDebug)&&e.stats(d,d.context,y),(d.options.showPerformance||d.options.showDebug)&&e.performance(d,d.context,y)})()},e.stop=function(d){t(d.frameRequestId)},e.setPixelRatio=function(d,m){var y=d.options,v=d.canvas;m==="auto"&&(m=g(v)),y.pixelRatio=m,v.setAttribute("data-pixel-ratio",m),v.width=y.width*m,v.height=y.height*m,v.style.width=y.width+"px",v.style.height=y.height+"px"},e.lookAt=function(d,m,y,v){v=typeof v>"u"||v,m=l.isArray(m)?m:[m],y=y||{x:0,y:0};for(var x={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},b=0;b<m.length;b+=1){var C=m[b],S=C.bounds?C.bounds.min:C.min||C.position||C,P=C.bounds?C.bounds.max:C.max||C.position||C;S&&P&&(S.x<x.min.x&&(x.min.x=S.x),P.x>x.max.x&&(x.max.x=P.x),S.y<x.min.y&&(x.min.y=S.y),P.y>x.max.y&&(x.max.y=P.y))}var _=x.max.x-x.min.x+2*y.x,M=x.max.y-x.min.y+2*y.y,B=d.canvas.height,I=d.canvas.width,T=I/B,E=_/M,V=1,L=1;E>T?L=E/T:V=T/E,d.options.hasBounds=!0,d.bounds.min.x=x.min.x,d.bounds.max.x=x.min.x+_*V,d.bounds.min.y=x.min.y,d.bounds.max.y=x.min.y+M*L,v&&(d.bounds.min.x+=.5*_-_*V*.5,d.bounds.max.x+=.5*_-_*V*.5,d.bounds.min.y+=.5*M-M*L*.5,d.bounds.max.y+=.5*M-M*L*.5),d.bounds.min.x-=y.x,d.bounds.max.x-=y.x,d.bounds.min.y-=y.y,d.bounds.max.y-=y.y,d.mouse&&(c.setScale(d.mouse,{x:(d.bounds.max.x-d.bounds.min.x)/d.canvas.width,y:(d.bounds.max.y-d.bounds.min.y)/d.canvas.height}),c.setOffset(d.mouse,d.bounds.min))},e.startViewTransform=function(d){var m=d.bounds.max.x-d.bounds.min.x,y=d.bounds.max.y-d.bounds.min.y,v=m/d.options.width,x=y/d.options.height;d.context.setTransform(d.options.pixelRatio/v,0,0,d.options.pixelRatio/x,0,0),d.context.translate(-d.bounds.min.x,-d.bounds.min.y)},e.endViewTransform=function(d){d.context.setTransform(d.options.pixelRatio,0,0,d.options.pixelRatio,0,0)},e.world=function(d,m){var y=l.now(),v=d.engine,x=v.world,b=d.canvas,C=d.context,S=d.options,P=d.timing,_,M=s.allBodies(x),B=s.allConstraints(x),I=S.wireframes?S.wireframeBackground:S.background,T=[],E=[],V={timestamp:v.timing.timestamp};if(u.trigger(d,"beforeRender",V),d.currentBackground!==I&&w(d,I),C.globalCompositeOperation="source-in",C.fillStyle="transparent",C.fillRect(0,0,b.width,b.height),C.globalCompositeOperation="source-over",S.hasBounds){for(_=0;_<M.length;_++){var L=M[_];o.overlaps(L.bounds,d.bounds)&&T.push(L)}for(_=0;_<B.length;_++){var F=B[_],W=F.bodyA,O=F.bodyB,G=F.pointA,H=F.pointB;W&&(G=r.add(W.position,F.pointA)),O&&(H=r.add(O.position,F.pointB)),G&&H&&(o.contains(d.bounds,G)||o.contains(d.bounds,H))&&E.push(F)}e.startViewTransform(d),d.mouse&&(c.setScale(d.mouse,{x:(d.bounds.max.x-d.bounds.min.x)/d.options.width,y:(d.bounds.max.y-d.bounds.min.y)/d.options.height}),c.setOffset(d.mouse,d.bounds.min))}else E=B,T=M,d.options.pixelRatio!==1&&d.context.setTransform(d.options.pixelRatio,0,0,d.options.pixelRatio,0,0);!S.wireframes||v.enableSleeping&&S.showSleeping?e.bodies(d,T,C):(S.showConvexHulls&&e.bodyConvexHulls(d,T,C),e.bodyWireframes(d,T,C)),S.showBounds&&e.bodyBounds(d,T,C),(S.showAxes||S.showAngleIndicator)&&e.bodyAxes(d,T,C),S.showPositions&&e.bodyPositions(d,T,C),S.showVelocity&&e.bodyVelocity(d,T,C),S.showIds&&e.bodyIds(d,T,C),S.showSeparations&&e.separations(d,v.pairs.list,C),S.showCollisions&&e.collisions(d,v.pairs.list,C),S.showVertexNumbers&&e.vertexNumbers(d,T,C),S.showMousePosition&&e.mousePosition(d,d.mouse,C),e.constraints(E,C),S.hasBounds&&e.endViewTransform(d),u.trigger(d,"afterRender",V),P.lastElapsed=l.now()-y},e.stats=function(d,m,y){for(var v=d.engine,x=v.world,b=s.allBodies(x),C=0,S=55,P=44,_=0,M=0,B=0;B<b.length;B+=1)C+=b[B].parts.length;var I={Part:C,Body:b.length,Cons:s.allConstraints(x).length,Comp:s.allComposites(x).length,Pair:v.pairs.list.length};m.fillStyle="#0e0f19",m.fillRect(_,M,5.5*S,P),m.font="12px Arial",m.textBaseline="top",m.textAlign="right";for(var T in I){var E=I[T];m.fillStyle="#aaa",m.fillText(T,_+S,M+8),m.fillStyle="#eee",m.fillText(E,_+S,M+26),_+=S}},e.performance=function(d,m){var y=d.engine,v=d.timing,x=v.deltaHistory,b=v.elapsedHistory,C=v.timestampElapsedHistory,S=v.engineDeltaHistory,P=v.engineElapsedHistory,_=y.timing.lastDelta,M=a(x),B=a(b),I=a(S),T=a(P),E=a(C),V=E/M||0,L=1e3/M||0,F=4,W=12,O=60,G=34,H=10,q=69;m.fillStyle="#0e0f19",m.fillRect(0,50,4*W+5*O+22,G),e.status(m,H,q,O,F,x.length,Math.round(L)+" fps",L/e._goodFps,function(N){return x[N]/M-1}),e.status(m,H+W+O,q,O,F,S.length,_.toFixed(2)+" dt",e._goodDelta/_,function(N){return S[N]/I-1}),e.status(m,H+2*(W+O),q,O,F,P.length,T.toFixed(2)+" ut",1-T/e._goodFps,function(N){return P[N]/T-1}),e.status(m,H+3*(W+O),q,O,F,b.length,B.toFixed(2)+" rt",1-B/e._goodFps,function(N){return b[N]/B-1}),e.status(m,H+4*(W+O),q,O,F,C.length,V.toFixed(2)+" x",V*V*V,function(N){return(C[N]/x[N]/V||0)-1})},e.status=function(d,m,y,v,x,b,C,S,P){d.strokeStyle="#888",d.fillStyle="#444",d.lineWidth=1,d.fillRect(m,y+7,v,1),d.beginPath(),d.moveTo(m,y+7-x*l.clamp(.4*P(0),-2,2));for(var _=0;_<v;_+=1)d.lineTo(m+_,y+7-(_<b?x*l.clamp(.4*P(_),-2,2):0));d.stroke(),d.fillStyle="hsl("+l.clamp(25+95*S,0,120)+",100%,60%)",d.fillRect(m,y-7,4,4),d.font="12px Arial",d.textBaseline="middle",d.textAlign="right",d.fillStyle="#eee",d.fillText(C,m+v,y-5)},e.constraints=function(d,m){for(var y=m,v=0;v<d.length;v++){var x=d[v];if(x.render.visible&&x.pointA&&x.pointB){var b,C,S=x.bodyA,P=x.bodyB;if(b=S?r.add(S.position,x.pointA):x.pointA,x.render.type==="pin")y.beginPath(),y.arc(b.x,b.y,3,0,2*Math.PI),y.closePath();else{if(C=P?r.add(P.position,x.pointB):x.pointB,y.beginPath(),y.moveTo(b.x,b.y),x.render.type==="spring")for(var _,M=r.sub(C,b),B=r.perp(r.normalise(M)),I=Math.ceil(l.clamp(x.length/5,12,20)),T=1;T<I;T+=1)_=T%2===0?1:-1,y.lineTo(b.x+M.x*(T/I)+B.x*_*4,b.y+M.y*(T/I)+B.y*_*4);y.lineTo(C.x,C.y)}x.render.lineWidth&&(y.lineWidth=x.render.lineWidth,y.strokeStyle=x.render.strokeStyle,y.stroke()),x.render.anchors&&(y.fillStyle=x.render.strokeStyle,y.beginPath(),y.arc(b.x,b.y,3,0,2*Math.PI),y.arc(C.x,C.y,3,0,2*Math.PI),y.closePath(),y.fill())}}},e.bodies=function(d,m,y){var v,x,b,C,S=y,P=(d.engine,d.options),_=P.showInternalEdges||!P.wireframes;for(b=0;b<m.length;b++)if(v=m[b],v.render.visible){for(C=v.parts.length>1?1:0;C<v.parts.length;C++)if(x=v.parts[C],x.render.visible){if(P.showSleeping&&v.isSleeping?S.globalAlpha=.5*x.render.opacity:x.render.opacity!==1&&(S.globalAlpha=x.render.opacity),x.render.sprite&&x.render.sprite.texture&&!P.wireframes){var M=x.render.sprite,B=h(d,M.texture);S.translate(x.position.x,x.position.y),S.rotate(x.angle),S.drawImage(B,B.width*-M.xOffset*M.xScale,B.height*-M.yOffset*M.yScale,B.width*M.xScale,B.height*M.yScale),S.rotate(-x.angle),S.translate(-x.position.x,-x.position.y)}else{if(x.circleRadius)S.beginPath(),S.arc(x.position.x,x.position.y,x.circleRadius,0,2*Math.PI);else{S.beginPath(),S.moveTo(x.vertices[0].x,x.vertices[0].y);for(var I=1;I<x.vertices.length;I++)!x.vertices[I-1].isInternal||_?S.lineTo(x.vertices[I].x,x.vertices[I].y):S.moveTo(x.vertices[I].x,x.vertices[I].y),x.vertices[I].isInternal&&!_&&S.moveTo(x.vertices[(I+1)%x.vertices.length].x,x.vertices[(I+1)%x.vertices.length].y);S.lineTo(x.vertices[0].x,x.vertices[0].y),S.closePath()}P.wireframes?(S.lineWidth=1,S.strokeStyle="#bbb",S.stroke()):(S.fillStyle=x.render.fillStyle,x.render.lineWidth&&(S.lineWidth=x.render.lineWidth,S.strokeStyle=x.render.strokeStyle,S.stroke()),S.fill())}S.globalAlpha=1}}},e.bodyWireframes=function(d,m,y){var v,x,b,C,S,P=y,_=d.options.showInternalEdges;for(P.beginPath(),b=0;b<m.length;b++)if(v=m[b],v.render.visible)for(S=v.parts.length>1?1:0;S<v.parts.length;S++){for(x=v.parts[S],P.moveTo(x.vertices[0].x,x.vertices[0].y),C=1;C<x.vertices.length;C++)!x.vertices[C-1].isInternal||_?P.lineTo(x.vertices[C].x,x.vertices[C].y):P.moveTo(x.vertices[C].x,x.vertices[C].y),x.vertices[C].isInternal&&!_&&P.moveTo(x.vertices[(C+1)%x.vertices.length].x,x.vertices[(C+1)%x.vertices.length].y);P.lineTo(x.vertices[0].x,x.vertices[0].y)}P.lineWidth=1,P.strokeStyle="#bbb",P.stroke()},e.bodyConvexHulls=function(d,m,y){var v,x,b,C=y;for(C.beginPath(),x=0;x<m.length;x++)if(v=m[x],v.render.visible&&v.parts.length!==1){for(C.moveTo(v.vertices[0].x,v.vertices[0].y),b=1;b<v.vertices.length;b++)C.lineTo(v.vertices[b].x,v.vertices[b].y);C.lineTo(v.vertices[0].x,v.vertices[0].y)}C.lineWidth=1,C.strokeStyle="rgba(255,255,255,0.2)",C.stroke()},e.vertexNumbers=function(d,m,y){var v,x,b,C=y;for(v=0;v<m.length;v++){var S=m[v].parts;for(b=S.length>1?1:0;b<S.length;b++){var P=S[b];for(x=0;x<P.vertices.length;x++)C.fillStyle="rgba(255,255,255,0.2)",C.fillText(v+"_"+x,P.position.x+.8*(P.vertices[x].x-P.position.x),P.position.y+.8*(P.vertices[x].y-P.position.y))}}},e.mousePosition=function(d,m,y){var v=y;v.fillStyle="rgba(255,255,255,0.8)",v.fillText(m.position.x+"  "+m.position.y,m.position.x+5,m.position.y-5)},e.bodyBounds=function(d,m,y){var v=y,x=(d.engine,d.options);v.beginPath();for(var b=0;b<m.length;b++){var C=m[b];if(C.render.visible)for(var S=m[b].parts,P=S.length>1?1:0;P<S.length;P++){var _=S[P];v.rect(_.bounds.min.x,_.bounds.min.y,_.bounds.max.x-_.bounds.min.x,_.bounds.max.y-_.bounds.min.y)}}x.wireframes?v.strokeStyle="rgba(255,255,255,0.08)":v.strokeStyle="rgba(0,0,0,0.1)",v.lineWidth=1,v.stroke()},e.bodyAxes=function(d,m,y){var v,x,b,C,S=y,P=(d.engine,d.options);for(S.beginPath(),x=0;x<m.length;x++){var _=m[x],M=_.parts;if(_.render.visible)if(P.showAxes)for(b=M.length>1?1:0;b<M.length;b++)for(v=M[b],C=0;C<v.axes.length;C++){var B=v.axes[C];S.moveTo(v.position.x,v.position.y),S.lineTo(v.position.x+20*B.x,v.position.y+20*B.y)}else for(b=M.length>1?1:0;b<M.length;b++)for(v=M[b],C=0;C<v.axes.length;C++)S.moveTo(v.position.x,v.position.y),S.lineTo((v.vertices[0].x+v.vertices[v.vertices.length-1].x)/2,(v.vertices[0].y+v.vertices[v.vertices.length-1].y)/2)}P.wireframes?(S.strokeStyle="indianred",S.lineWidth=1):(S.strokeStyle="rgba(255, 255, 255, 0.4)",S.globalCompositeOperation="overlay",S.lineWidth=2),S.stroke(),S.globalCompositeOperation="source-over"},e.bodyPositions=function(d,m,y){var v,x,b,C,S=y,P=(d.engine,d.options);for(S.beginPath(),b=0;b<m.length;b++)if(v=m[b],v.render.visible)for(C=0;C<v.parts.length;C++)x=v.parts[C],S.arc(x.position.x,x.position.y,3,0,2*Math.PI,!1),S.closePath();for(P.wireframes?S.fillStyle="indianred":S.fillStyle="rgba(0,0,0,0.5)",S.fill(),S.beginPath(),b=0;b<m.length;b++)v=m[b],v.render.visible&&(S.arc(v.positionPrev.x,v.positionPrev.y,2,0,2*Math.PI,!1),S.closePath());S.fillStyle="rgba(255,165,0,0.8)",S.fill()},e.bodyVelocity=function(d,m,y){var v=y;v.beginPath();for(var x=0;x<m.length;x++){var b=m[x];b.render.visible&&(v.moveTo(b.position.x,b.position.y),v.lineTo(b.position.x+2*(b.position.x-b.positionPrev.x),b.position.y+2*(b.position.y-b.positionPrev.y)))}v.lineWidth=3,v.strokeStyle="cornflowerblue",v.stroke()},e.bodyIds=function(d,m,y){var v,x,b=y;for(v=0;v<m.length;v++)if(m[v].render.visible){var C=m[v].parts;for(x=C.length>1?1:0;x<C.length;x++){var S=C[x];b.font="12px Arial",b.fillStyle="rgba(255,255,255,0.5)",b.fillText(S.id,S.position.x+10,S.position.y-10)}}},e.collisions=function(d,m,y){var v,x,b,C,S=y,P=d.options;for(S.beginPath(),b=0;b<m.length;b++)if(v=m[b],v.isActive)for(x=v.collision,C=0;C<v.activeContacts.length;C++){var _=v.activeContacts[C],M=_.vertex;S.rect(M.x-1.5,M.y-1.5,3.5,3.5)}for(P.wireframes?S.fillStyle="rgba(255,255,255,0.7)":S.fillStyle="orange",S.fill(),S.beginPath(),b=0;b<m.length;b++)if(v=m[b],v.isActive&&(x=v.collision,v.activeContacts.length>0)){var B=v.activeContacts[0].vertex.x,I=v.activeContacts[0].vertex.y;v.activeContacts.length===2&&(B=(v.activeContacts[0].vertex.x+v.activeContacts[1].vertex.x)/2,I=(v.activeContacts[0].vertex.y+v.activeContacts[1].vertex.y)/2),x.bodyB===x.supports[0].body||x.bodyA.isStatic===!0?S.moveTo(B-8*x.normal.x,I-8*x.normal.y):S.moveTo(B+8*x.normal.x,I+8*x.normal.y),S.lineTo(B,I)}P.wireframes?S.strokeStyle="rgba(255,165,0,0.7)":S.strokeStyle="orange",S.lineWidth=1,S.stroke()},e.separations=function(d,m,y){var v,x,b,C,S,P=y,_=d.options;for(P.beginPath(),S=0;S<m.length;S++)if(v=m[S],v.isActive){x=v.collision,b=x.bodyA,C=x.bodyB;var M=1;C.isStatic||b.isStatic||(M=.5),C.isStatic&&(M=0),P.moveTo(C.position.x,C.position.y),P.lineTo(C.position.x-x.penetration.x*M,C.position.y-x.penetration.y*M),M=1,C.isStatic||b.isStatic||(M=.5),b.isStatic&&(M=0),P.moveTo(b.position.x,b.position.y),P.lineTo(b.position.x+x.penetration.x*M,b.position.y+x.penetration.y*M)}_.wireframes?P.strokeStyle="rgba(255,165,0,0.5)":P.strokeStyle="orange",P.stroke()},e.inspector=function(d,m){d.engine;var y,v=d.selected,x=d.render,b=x.options;if(b.hasBounds){var C=x.bounds.max.x-x.bounds.min.x,S=x.bounds.max.y-x.bounds.min.y,P=C/x.options.width,_=S/x.options.height;m.scale(1/P,1/_),m.translate(-x.bounds.min.x,-x.bounds.min.y)}for(var M=0;M<v.length;M++){var B=v[M].data;switch(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.9)",m.setLineDash([1,2]),B.type){case"body":y=B.bounds,m.beginPath(),m.rect(Math.floor(y.min.x-3),Math.floor(y.min.y-3),Math.floor(y.max.x-y.min.x+6),Math.floor(y.max.y-y.min.y+6)),m.closePath(),m.stroke();break;case"constraint":var I=B.pointA;B.bodyA&&(I=B.pointB),m.beginPath(),m.arc(I.x,I.y,10,0,2*Math.PI),m.closePath(),m.stroke();break}m.setLineDash([]),m.translate(-.5,-.5)}d.selectStart!==null&&(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.6)",m.fillStyle="rgba(255,165,0,0.1)",y=d.selectBounds,m.beginPath(),m.rect(Math.floor(y.min.x),Math.floor(y.min.y),Math.floor(y.max.x-y.min.x),Math.floor(y.max.y-y.min.y)),m.closePath(),m.stroke(),m.fill(),m.translate(-.5,-.5)),b.hasBounds&&m.setTransform(1,0,0,1,0,0)};var n=function(d,m){var y=d.engine,v=d.timing,x=v.historySize,b=y.timing.timestamp;v.delta=m-v.lastTime||e._goodDelta,v.lastTime=m,v.timestampElapsed=b-v.lastTimestamp||0,v.lastTimestamp=b,v.deltaHistory.unshift(v.delta),v.deltaHistory.length=Math.min(v.deltaHistory.length,x),v.engineDeltaHistory.unshift(y.timing.lastDelta),v.engineDeltaHistory.length=Math.min(v.engineDeltaHistory.length,x),v.timestampElapsedHistory.unshift(v.timestampElapsed),v.timestampElapsedHistory.length=Math.min(v.timestampElapsedHistory.length,x),v.engineElapsedHistory.unshift(y.timing.lastElapsed),v.engineElapsedHistory.length=Math.min(v.engineElapsedHistory.length,x),v.elapsedHistory.unshift(v.lastElapsed),v.elapsedHistory.length=Math.min(v.elapsedHistory.length,x)},a=function(d){for(var m=0,y=0;y<d.length;y+=1)m+=d[y];return m/d.length||0},f=function(d,m){var y=document.createElement("canvas");return y.width=d,y.height=m,y.oncontextmenu=function(){return!1},y.onselectstart=function(){return!1},y},g=function(d){var m=d.getContext("2d"),y=R.devicePixelRatio||1,v=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return y/v},h=function(d,m){var y=d.textures[m];return y||(y=d.textures[m]=new Image,y.src=m,y)},w=function(d,m){var y=m;/(jpg|gif|png)$/.test(m)&&(y="url("+m+")"),d.canvas.style.background=y,d.canvas.style.backgroundSize="contain",d.currentBackground=m}})()},function(A,k){var p={};A.exports=p,function(){p.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(A,k,p){var e={};A.exports=e;var l=p(7),s=p(19),o=p(14),u=p(20),r=p(4),c=p(5),i=p(10),t=p(0),n=p(6);(function(){e.create=function(a){a=a||{};var f={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},g=t.extend(f,a);return g.world=a.world||c.create({label:"World"}),g.pairs=a.pairs||u.create(),g.detector=a.detector||o.create(),g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},e.update=function(a,f,g){var h=t.now();f=f||1e3/60,g=g||1;var w,d=a.world,m=a.detector,y=a.pairs,v=a.timing,x=v.timestamp;v.timestamp+=f*v.timeScale,v.lastDelta=f*v.timeScale;var b={timestamp:v.timestamp};r.trigger(a,"beforeUpdate",b);var C=c.allBodies(d),S=c.allConstraints(d);for(d.isModified&&o.setBodies(m,C),d.isModified&&c.setModified(d,!1,!1,!0),a.enableSleeping&&l.update(C,v.timeScale),e._bodiesApplyGravity(C,a.gravity),e._bodiesUpdate(C,f,v.timeScale,g,d.bounds),i.preSolveAll(C),w=0;w<a.constraintIterations;w++)i.solveAll(S,v.timeScale);i.postSolveAll(C),m.pairs=a.pairs;var P=o.collisions(m);for(u.update(y,P,x),a.enableSleeping&&l.afterCollisions(y.list,v.timeScale),y.collisionStart.length>0&&r.trigger(a,"collisionStart",{pairs:y.collisionStart}),s.preSolvePosition(y.list),w=0;w<a.positionIterations;w++)s.solvePosition(y.list,v.timeScale);for(s.postSolvePosition(C),i.preSolveAll(C),w=0;w<a.constraintIterations;w++)i.solveAll(S,v.timeScale);for(i.postSolveAll(C),s.preSolveVelocity(y.list),w=0;w<a.velocityIterations;w++)s.solveVelocity(y.list,v.timeScale);return y.collisionActive.length>0&&r.trigger(a,"collisionActive",{pairs:y.collisionActive}),y.collisionEnd.length>0&&r.trigger(a,"collisionEnd",{pairs:y.collisionEnd}),e._bodiesClearForces(C),r.trigger(a,"afterUpdate",b),a.timing.lastElapsed=t.now()-h,a},e.merge=function(a,f){if(t.extend(a,f),f.world){a.world=f.world,e.clear(a);for(var g=c.allBodies(a.world),h=0;h<g.length;h++){var w=g[h];l.set(w,!1),w.id=t.nextId()}}},e.clear=function(a){u.clear(a.pairs),o.clear(a.detector)},e._bodiesClearForces=function(a){for(var f=0;f<a.length;f++){var g=a[f];g.force.x=0,g.force.y=0,g.torque=0}},e._bodiesApplyGravity=function(a,f){var g=typeof f.scale<"u"?f.scale:.001;if((f.x!==0||f.y!==0)&&g!==0)for(var h=0;h<a.length;h++){var w=a[h];!w.isStatic&&!w.isSleeping&&(w.force.y+=w.mass*f.y*g,w.force.x+=w.mass*f.x*g)}},e._bodiesUpdate=function(a,f,g,h,w){for(var d=0;d<a.length;d++){var m=a[d];m.isStatic||m.isSleeping||n.update(m,f,g,h)}}})()},function(A,k,p){var e={};A.exports=e;var l=p(3),s=p(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(o){var u,r,c,i=o.length;for(u=0;u<i;u++)r=o[u],r.isActive&&(c=r.activeContacts.length,r.collision.parentA.totalContacts+=c,r.collision.parentB.totalContacts+=c)},e.solvePosition=function(o,u){var r,c,i,t,n,a,f,g,h=e._positionDampen,w=o.length;for(r=0;r<w;r++)c=o[r],c.isActive&&!c.isSensor&&(i=c.collision,t=i.parentA,n=i.parentB,a=i.normal,c.separation=a.x*(n.positionImpulse.x+i.penetration.x-t.positionImpulse.x)+a.y*(n.positionImpulse.y+i.penetration.y-t.positionImpulse.y));for(r=0;r<w;r++)c=o[r],c.isActive&&!c.isSensor&&(i=c.collision,t=i.parentA,n=i.parentB,a=i.normal,g=(c.separation-c.slop)*u,(t.isStatic||n.isStatic)&&(g*=2),t.isStatic||t.isSleeping||(f=h/t.totalContacts,t.positionImpulse.x+=a.x*g*f,t.positionImpulse.y+=a.y*g*f),n.isStatic||n.isSleeping||(f=h/n.totalContacts,n.positionImpulse.x-=a.x*g*f,n.positionImpulse.y-=a.y*g*f))},e.postSolvePosition=function(o){for(var u=e._positionWarming,r=o.length,c=l.translate,i=s.update,t=0;t<r;t++){var n=o[t],a=n.positionImpulse,f=a.x,g=a.y,h=n.velocity;if(n.totalContacts=0,f!==0||g!==0){for(var w=0;w<n.parts.length;w++){var d=n.parts[w];c(d.vertices,a),i(d.bounds,d.vertices,h),d.position.x+=f,d.position.y+=g}n.positionPrev.x+=f,n.positionPrev.y+=g,f*h.x+g*h.y<0?(a.x=0,a.y=0):(a.x*=u,a.y*=u)}}},e.preSolveVelocity=function(o){var u,r,c=o.length;for(u=0;u<c;u++){var i=o[u];if(i.isActive&&!i.isSensor){var t=i.activeContacts,n=t.length,a=i.collision,f=a.parentA,g=a.parentB,h=a.normal,w=a.tangent;for(r=0;r<n;r++){var d=t[r],m=d.vertex,y=d.normalImpulse,v=d.tangentImpulse;if(y!==0||v!==0){var x=h.x*y+w.x*v,b=h.y*y+w.y*v;f.isStatic||f.isSleeping||(f.positionPrev.x+=x*f.inverseMass,f.positionPrev.y+=b*f.inverseMass,f.anglePrev+=f.inverseInertia*((m.x-f.position.x)*b-(m.y-f.position.y)*x)),g.isStatic||g.isSleeping||(g.positionPrev.x-=x*g.inverseMass,g.positionPrev.y-=b*g.inverseMass,g.anglePrev-=g.inverseInertia*((m.x-g.position.x)*b-(m.y-g.position.y)*x))}}}}},e.solveVelocity=function(o,u){var r,c,i,t,n=u*u,a=e._restingThresh*n,f=e._frictionNormalMultiplier,g=e._restingThreshTangent*n,h=Number.MAX_VALUE,w=o.length;for(i=0;i<w;i++){var d=o[i];if(d.isActive&&!d.isSensor){var m=d.collision,y=m.parentA,v=m.parentB,x=y.velocity,b=v.velocity,C=m.normal.x,S=m.normal.y,P=m.tangent.x,_=m.tangent.y,M=d.activeContacts,B=M.length,I=1/B,T=y.inverseMass+v.inverseMass,E=d.friction*d.frictionStatic*f*n;for(x.x=y.position.x-y.positionPrev.x,x.y=y.position.y-y.positionPrev.y,b.x=v.position.x-v.positionPrev.x,b.y=v.position.y-v.positionPrev.y,y.angularVelocity=y.angle-y.anglePrev,v.angularVelocity=v.angle-v.anglePrev,t=0;t<B;t++){var V=M[t],L=V.vertex,F=L.x-y.position.x,W=L.y-y.position.y,O=L.x-v.position.x,G=L.y-v.position.y,H=x.x-W*y.angularVelocity,q=x.y+F*y.angularVelocity,N=b.x-G*v.angularVelocity,Pe=b.y+O*v.angularVelocity,ae=H-N,se=q-Pe,Q=C*ae+S*se,z=P*ae+_*se,le=d.separation+Q,oe=Math.min(le,1);oe=le<0?0:oe;var ce=oe*E;z>ce||-z>ce?(c=z>0?z:-z,r=d.friction*(z>0?1:-1)*n,r<-c?r=-c:r>c&&(r=c)):(r=z,c=h);var ue=F*S-W*C,de=O*S-G*C,fe=I/(T+y.inverseInertia*ue*ue+v.inverseInertia*de*de),$=(1+d.restitution)*Q*fe;if(r*=fe,Q*Q>a&&Q<0)V.normalImpulse=0;else{var Ae=V.normalImpulse;V.normalImpulse+=$,V.normalImpulse=Math.min(V.normalImpulse,0),$=V.normalImpulse-Ae}if(z*z>g)V.tangentImpulse=0;else{var _e=V.tangentImpulse;V.tangentImpulse+=r,V.tangentImpulse<-c&&(V.tangentImpulse=-c),V.tangentImpulse>c&&(V.tangentImpulse=c),r=V.tangentImpulse-_e}var K=C*$+P*r,J=S*$+_*r;y.isStatic||y.isSleeping||(y.positionPrev.x+=K*y.inverseMass,y.positionPrev.y+=J*y.inverseMass,y.anglePrev+=(F*J-W*K)*y.inverseInertia),v.isStatic||v.isSleeping||(v.positionPrev.x-=K*v.inverseMass,v.positionPrev.y-=J*v.inverseMass,v.anglePrev-=(O*J-G*K)*v.inverseInertia)}}}}})()},function(A,k,p){var e={};A.exports=e;var l=p(9),s=p(0);(function(){e.create=function(o){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},e.update=function(o,u,r){var c,i,t,n,a=o.list,f=a.length,g=o.table,h=u.length,w=o.collisionStart,d=o.collisionEnd,m=o.collisionActive;for(w.length=0,d.length=0,m.length=0,n=0;n<f;n++)a[n].confirmedActive=!1;for(n=0;n<h;n++)c=u[n],t=c.pair,t?(t.isActive?m.push(t):w.push(t),l.update(t,c,r),t.confirmedActive=!0):(t=l.create(c,r),g[t.id]=t,w.push(t),a.push(t));var y=[];for(f=a.length,n=0;n<f;n++)t=a[n],t.confirmedActive||(l.setActive(t,!1,r),d.push(t),t.collision.bodyA.isSleeping||t.collision.bodyB.isSleeping||y.push(n));for(n=0;n<y.length;n++)i=y[n]-n,t=a[i],a.splice(i,1),delete g[t.id]},e.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},function(A,k,p){var e=A.exports=p(22);e.Axes=p(11),e.Bodies=p(12),e.Body=p(6),e.Bounds=p(1),e.Collision=p(8),e.Common=p(0),e.Composite=p(5),e.Composites=p(23),e.Constraint=p(10),e.Contact=p(17),e.Detector=p(14),e.Engine=p(18),e.Events=p(4),e.Grid=p(24),e.Mouse=p(13),e.MouseConstraint=p(25),e.Pair=p(9),e.Pairs=p(20),e.Plugin=p(15),e.Query=p(26),e.Render=p(16),e.Resolver=p(19),e.Runner=p(27),e.SAT=p(28),e.Sleeping=p(7),e.Svg=p(29),e.Vector=p(2),e.Vertices=p(3),e.World=p(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(A,k,p){var e={};A.exports=e;var l=p(15),s=p(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(o,u){return o=o.replace(/^Matter./,""),s.chainPathBefore(e,o,u)},e.after=function(o,u){return o=o.replace(/^Matter./,""),s.chainPathAfter(e,o,u)}})()},function(A,k,p){var e={};A.exports=e;var l=p(5),s=p(10),o=p(0),u=p(6),r=p(12),c=o.deprecated;(function(){e.stack=function(i,t,n,a,f,g,h){for(var w,d=l.create({label:"Stack"}),m=i,y=t,v=0,x=0;x<a;x++){for(var b=0,C=0;C<n;C++){var S=h(m,y,C,x,w,v);if(S){var P=S.bounds.max.y-S.bounds.min.y,_=S.bounds.max.x-S.bounds.min.x;P>b&&(b=P),u.translate(S,{x:.5*_,y:.5*P}),m=S.bounds.max.x+f,l.addBody(d,S),w=S,v+=1}else m+=f}y+=b+g,m=i}return d},e.chain=function(i,t,n,a,f,g){for(var h=i.bodies,w=1;w<h.length;w++){var d=h[w-1],m=h[w],y=d.bounds.max.y-d.bounds.min.y,v=d.bounds.max.x-d.bounds.min.x,x=m.bounds.max.y-m.bounds.min.y,b=m.bounds.max.x-m.bounds.min.x,C={bodyA:d,pointA:{x:v*t,y:y*n},bodyB:m,pointB:{x:b*a,y:x*f}},S=o.extend(C,g);l.addConstraint(i,s.create(S))}return i.label+=" Chain",i},e.mesh=function(i,t,n,a,f){var g,h,w,d,m,y=i.bodies;for(g=0;g<n;g++){for(h=1;h<t;h++)w=y[h-1+g*t],d=y[h+g*t],l.addConstraint(i,s.create(o.extend({bodyA:w,bodyB:d},f)));if(g>0)for(h=0;h<t;h++)w=y[h+(g-1)*t],d=y[h+g*t],l.addConstraint(i,s.create(o.extend({bodyA:w,bodyB:d},f))),a&&h>0&&(m=y[h-1+(g-1)*t],l.addConstraint(i,s.create(o.extend({bodyA:m,bodyB:d},f)))),a&&h<t-1&&(m=y[h+1+(g-1)*t],l.addConstraint(i,s.create(o.extend({bodyA:m,bodyB:d},f))))}return i.label+=" Mesh",i},e.pyramid=function(i,t,n,a,f,g,h){return e.stack(i,t,n,a,f,g,function(w,d,m,y,v,x){var b=Math.min(a,Math.ceil(n/2)),C=v?v.bounds.max.x-v.bounds.min.x:0;if(!(y>b)){y=b-y;var S=y,P=n-1-y;if(!(m<S||m>P)){x===1&&u.translate(v,{x:(m+(n%2===1?1:-1))*C,y:0});var _=v?m*C:0;return h(i+_+m*f,d,m,y,v,x)}}})},e.newtonsCradle=function(i,t,n,a,f){for(var g=l.create({label:"Newtons Cradle"}),h=0;h<n;h++){var w=1.9,d=r.circle(i+h*(a*w),t+f,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=s.create({pointA:{x:i+h*(a*w),y:t},bodyB:d});l.addBody(g,d),l.addConstraint(g,m)}return g},c(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(i,t,n,a,f){var g=u.nextGroup(!0),h=20,w=.5*-n+h,d=.5*n-h,m=0,y=l.create({label:"Car"}),v=r.rectangle(i,t,n,a,{collisionFilter:{group:g},chamfer:{radius:.5*a},density:2e-4}),x=r.circle(i+w,t+m,f,{collisionFilter:{group:g},friction:.8}),b=r.circle(i+d,t+m,f,{collisionFilter:{group:g},friction:.8}),C=s.create({bodyB:v,pointB:{x:w,y:m},bodyA:x,stiffness:1,length:0}),S=s.create({bodyB:v,pointB:{x:d,y:m},bodyA:b,stiffness:1,length:0});return l.addBody(y,v),l.addBody(y,x),l.addBody(y,b),l.addConstraint(y,C),l.addConstraint(y,S),y},c(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(i,t,n,a,f,g,h,w,d,m){d=o.extend({inertia:1/0},d),m=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var y=e.stack(i,t,n,a,f,g,function(v,x){return r.circle(v,x,w,d)});return e.mesh(y,n,a,h,m),y.label="Soft Body",y},c(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(A,k,p){var e={};A.exports=e;var l=p(9),s=p(0),o=s.deprecated;(function(){e.create=function(u){var r={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(r,u)},e.update=function(u,r,c,i){var t,n,a,f,g,h=c.world,w=u.buckets,d=!1;for(t=0;t<r.length;t++){var m=r[t];if((!m.isSleeping||i)&&(!h.bounds||!(m.bounds.max.x<h.bounds.min.x||m.bounds.min.x>h.bounds.max.x||m.bounds.max.y<h.bounds.min.y||m.bounds.min.y>h.bounds.max.y))){var y=e._getRegion(u,m);if(!m.region||y.id!==m.region.id||i){m.region&&!i||(m.region=y);var v=e._regionUnion(y,m.region);for(n=v.startCol;n<=v.endCol;n++)for(a=v.startRow;a<=v.endRow;a++){g=e._getBucketId(n,a),f=w[g];var x=n>=y.startCol&&n<=y.endCol&&a>=y.startRow&&a<=y.endRow,b=n>=m.region.startCol&&n<=m.region.endCol&&a>=m.region.startRow&&a<=m.region.endRow;!x&&b&&b&&f&&e._bucketRemoveBody(u,f,m),(m.region===y||x&&!b||i)&&(f||(f=e._createBucket(w,g)),e._bucketAddBody(u,f,m))}m.region=y,d=!0}}}d&&(u.pairsList=e._createActivePairsList(u))},o(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},o(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(u,r){var c=Math.min(u.startCol,r.startCol),i=Math.max(u.endCol,r.endCol),t=Math.min(u.startRow,r.startRow),n=Math.max(u.endRow,r.endRow);return e._createRegion(c,i,t,n)},e._getRegion=function(u,r){var c=r.bounds,i=Math.floor(c.min.x/u.bucketWidth),t=Math.floor(c.max.x/u.bucketWidth),n=Math.floor(c.min.y/u.bucketHeight),a=Math.floor(c.max.y/u.bucketHeight);return e._createRegion(i,t,n,a)},e._createRegion=function(u,r,c,i){return{id:u+","+r+","+c+","+i,startCol:u,endCol:r,startRow:c,endRow:i}},e._getBucketId=function(u,r){return"C"+u+"R"+r},e._createBucket=function(u,r){var c=u[r]=[];return c},e._bucketAddBody=function(u,r,c){var i,t=u.pairs,n=l.id,a=r.length;for(i=0;i<a;i++){var f=r[i];if(!(c.id===f.id||c.isStatic&&f.isStatic)){var g=n(c,f),h=t[g];h?h[2]+=1:t[g]=[c,f,1]}}r.push(c)},e._bucketRemoveBody=function(u,r,c){var i,t=u.pairs,n=l.id;r.splice(s.indexOf(r,c),1);var a=r.length;for(i=0;i<a;i++){var f=t[n(c,r[i])];f&&(f[2]-=1)}},e._createActivePairsList=function(u){var r,c,i=u.pairs,t=s.keys(i),n=t.length,a=[];for(c=0;c<n;c++)r=i[t[c]],r[2]>0?a.push(r):delete i[t[c]];return a}})()},function(A,k,p){var e={};A.exports=e;var l=p(3),s=p(7),o=p(13),u=p(4),r=p(14),c=p(10),i=p(5),t=p(0),n=p(1);(function(){e.create=function(a,f){var g=(a?a.mouse:null)||(f?f.mouse:null);g||(a&&a.render&&a.render.canvas?g=o.create(a.render.canvas):f&&f.element?g=o.create(f.element):(g=o.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var h=c.create({label:"Mouse Constraint",pointA:g.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:g,element:null,body:null,constraint:h,collisionFilter:{category:1,mask:4294967295,group:0}},d=t.extend(w,f);return u.on(a,"beforeUpdate",function(){var m=i.allBodies(a.world);e.update(d,m),e._triggerEvents(d)}),d},e.update=function(a,f){var g=a.mouse,h=a.constraint,w=a.body;if(g.button===0){if(h.bodyB)s.set(h.bodyB,!1),h.pointA=g.position;else for(var d=0;d<f.length;d++)if(w=f[d],n.contains(w.bounds,g.position)&&r.canCollide(w.collisionFilter,a.collisionFilter))for(var m=w.parts.length>1?1:0;m<w.parts.length;m++){var y=w.parts[m];if(l.contains(y.vertices,g.position)){h.pointA=g.position,h.bodyB=a.body=w,h.pointB={x:g.position.x-w.position.x,y:g.position.y-w.position.y},h.angleB=w.angle,s.set(w,!1),u.trigger(a,"startdrag",{mouse:g,body:w});break}}}else h.bodyB=a.body=null,h.pointB=null,w&&u.trigger(a,"enddrag",{mouse:g,body:w})},e._triggerEvents=function(a){var f=a.mouse,g=f.sourceEvents;g.mousemove&&u.trigger(a,"mousemove",{mouse:f}),g.mousedown&&u.trigger(a,"mousedown",{mouse:f}),g.mouseup&&u.trigger(a,"mouseup",{mouse:f}),o.clearSourceEvents(f)}})()},function(A,k,p){var e={};A.exports=e;var l=p(2),s=p(8),o=p(1),u=p(12),r=p(3);(function(){e.collides=function(c,i){for(var t=[],n=i.length,a=c.bounds,f=s.collides,g=o.overlaps,h=0;h<n;h++){var w=i[h],d=w.parts.length,m=d===1?0:1;if(g(w.bounds,a))for(var y=m;y<d;y++){var v=w.parts[y];if(g(v.bounds,a)){var x=f(v,c);if(x){t.push(x);break}}}}return t},e.ray=function(c,i,t,n){n=n||1e-100;for(var a=l.angle(i,t),f=l.magnitude(l.sub(i,t)),g=.5*(t.x+i.x),h=.5*(t.y+i.y),w=u.rectangle(g,h,f,n,{angle:a}),d=e.collides(w,c),m=0;m<d.length;m+=1){var y=d[m];y.body=y.bodyB=y.bodyA}return d},e.region=function(c,i,t){for(var n=[],a=0;a<c.length;a++){var f=c[a],g=o.overlaps(f.bounds,i);(g&&!t||!g&&t)&&n.push(f)}return n},e.point=function(c,i){for(var t=[],n=0;n<c.length;n++){var a=c[n];if(o.contains(a.bounds,i))for(var f=a.parts.length===1?0:1;f<a.parts.length;f++){var g=a.parts[f];if(o.contains(g.bounds,i)&&r.contains(g.vertices,i)){t.push(a);break}}}return t}})()},function(A,k,p){var e={};A.exports=e;var l=p(4),s=p(18),o=p(0);(function(){var u,r;if(typeof R<"u"&&(u=R.requestAnimationFrame||R.webkitRequestAnimationFrame||R.mozRequestAnimationFrame||R.msRequestAnimationFrame,r=R.cancelAnimationFrame||R.mozCancelAnimationFrame||R.webkitCancelAnimationFrame||R.msCancelAnimationFrame),!u){var c;u=function(i){c=setTimeout(function(){i(o.now())},1e3/60)},r=function(){clearTimeout(c)}}e.create=function(i){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},n=o.extend(t,i);return n.delta=n.delta||1e3/n.fps,n.deltaMin=n.deltaMin||1e3/n.fps,n.deltaMax=n.deltaMax||1e3/(.5*n.fps),n.fps=1e3/n.delta,n},e.run=function(i,t){return typeof i.positionIterations<"u"&&(t=i,i=e.create()),function n(a){i.frameRequestId=u(n),a&&i.enabled&&e.tick(i,t,a)}(),i},e.tick=function(i,t,n){var a,f=t.timing,g=1,h={timestamp:f.timestamp};l.trigger(i,"beforeTick",h),i.isFixed?a=i.delta:(a=n-i.timePrev||i.delta,i.timePrev=n,i.deltaHistory.push(a),i.deltaHistory=i.deltaHistory.slice(-i.deltaSampleSize),a=Math.min.apply(null,i.deltaHistory),a=a<i.deltaMin?i.deltaMin:a,a=a>i.deltaMax?i.deltaMax:a,g=a/i.delta,i.delta=a),i.timeScalePrev!==0&&(g*=f.timeScale/i.timeScalePrev),f.timeScale===0&&(g=0),i.timeScalePrev=f.timeScale,i.correction=g,i.frameCounter+=1,n-i.counterTimestamp>=1e3&&(i.fps=i.frameCounter*((n-i.counterTimestamp)/1e3),i.counterTimestamp=n,i.frameCounter=0),l.trigger(i,"tick",h),l.trigger(i,"beforeUpdate",h),s.update(t,a,g),l.trigger(i,"afterUpdate",h),l.trigger(i,"afterTick",h)},e.stop=function(i){r(i.frameRequestId)},e.start=function(i,t){e.run(i,t)}})()},function(A,k,p){var e={};A.exports=e;var l=p(8),s=p(0),o=s.deprecated;(function(){e.collides=function(u,r){return l.collides(u,r)},o(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(A,k,p){var e={};A.exports=e,p(1);var l=p(0);(function(){e.pathToVertices=function(s,o){typeof R>"u"||"SVGPathSeg"in R||l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,r,c,i,t,n,a,f,g,h,w,d,m=[],y=0,v=0,x=0;o=o||15;var b=function(S,P,_){var M=_%2===1&&_>1;if(!g||S!=g.x||P!=g.y){g&&M?(w=g.x,d=g.y):(w=0,d=0);var B={x:w+S,y:d+P};!M&&g||(g=B),m.push(B),v=w+S,x=d+P}},C=function(S){var P=S.pathSegTypeAsLetter.toUpperCase();if(P!=="Z"){switch(P){case"M":case"L":case"T":case"C":case"S":case"Q":v=S.x,x=S.y;break;case"H":v=S.x;break;case"V":x=S.y;break}b(v,x,S.pathSegType)}};for(e._svgPathToAbsolute(s),c=s.getTotalLength(),n=[],u=0;u<s.pathSegList.numberOfItems;u+=1)n.push(s.pathSegList.getItem(u));for(a=n.concat();y<c;){if(h=s.getPathSegAtLength(y),t=n[h],t!=f){for(;a.length&&a[0]!=t;)C(a.shift());f=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=s.getPointAtLength(y),b(i.x,i.y,0);break}y+=o}for(u=0,r=a.length;u<r;++u)C(a[u]);return m},e._svgPathToAbsolute=function(s){for(var o,u,r,c,i,t,n=s.pathSegList,a=0,f=0,g=n.numberOfItems,h=0;h<g;++h){var w=n.getItem(h),d=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(d))"x"in w&&(a=w.x),"y"in w&&(f=w.y);else switch("x1"in w&&(r=a+w.x1),"x2"in w&&(i=a+w.x2),"y1"in w&&(c=f+w.y1),"y2"in w&&(t=f+w.y2),"x"in w&&(a+=w.x),"y"in w&&(f+=w.y),d){case"m":n.replaceItem(s.createSVGPathSegMovetoAbs(a,f),h);break;case"l":n.replaceItem(s.createSVGPathSegLinetoAbs(a,f),h);break;case"h":n.replaceItem(s.createSVGPathSegLinetoHorizontalAbs(a),h);break;case"v":n.replaceItem(s.createSVGPathSegLinetoVerticalAbs(f),h);break;case"c":n.replaceItem(s.createSVGPathSegCurvetoCubicAbs(a,f,r,c,i,t),h);break;case"s":n.replaceItem(s.createSVGPathSegCurvetoCubicSmoothAbs(a,f,i,t),h);break;case"q":n.replaceItem(s.createSVGPathSegCurvetoQuadraticAbs(a,f,r,c),h);break;case"t":n.replaceItem(s.createSVGPathSegCurvetoQuadraticSmoothAbs(a,f),h);break;case"a":n.replaceItem(s.createSVGPathSegArcAbs(a,f,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),h);break;case"z":case"Z":a=o,f=u;break}(d=="M"||d=="m")&&(o=a,u=f)}}})()},function(A,k,p){var e={};A.exports=e;var l=p(5);p(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])});var j=te,Ge=te.Matter,ze=te.__esModule;var ne={isStatic:!0,friction:2};function Se(A,k,p){var e=j.Bodies;let l,s,o,u;p.bottom&&(l=e.rectangle(A.width/2,A.height+50,A.width+100,100,ne),j.World.add(k,l)),p.top&&(s=e.rectangle(A.width/2,-50,A.width+100,100,ne),j.World.add(k,s)),p.right&&(u=e.rectangle(A.width+50,A.height/2,100,A.height,ne),j.World.add(k,u)),p.bottom&&(o=e.rectangle(-50,A.height/2,100,A.height,ne),j.World.add(k,o))}function we(A,k,p,e,l){let s=A.getBoundingClientRect(),o=j.Composites.stack(0,0,p.length,1,0,0,(u,r,c)=>{let{x:i,y:t,width:n,height:a}=p[c].getBoundingClientRect();var f=s.width-n,g=s.height-a,h=Math.floor(Math.random()*f),w=Math.floor(Math.random()*g);return j.Bodies.rectangle(h,w,n,a,{isStatic:!1,density:l.enable?l.density:0,friction:e.friction,frictionAir:e.frictionAir})});return j.World.add(k,o),o}function re(A){var k;let p;Y.useEffect(()=>{if(!p){p=j.Engine.create({enableSleeping:A.sleeping,gravity:{y:A.gravY,x:A.gravX}});let s=e.current.getBoundingClientRect();if(Se(s,p.world,A.wallOptions),A.debug){var l=j.Render.create({element:e.current,engine:p,options:{height:s.height,width:s.width,showAngleIndicator:!0,showVelocity:!0}});j.Render.run(l)}let o=null;if(A.mouseOptions.enable){let r=j.Mouse.create(e.current);o=j.MouseConstraint.create(p,{mouse:r,constraint:{angularStiffness:A.mouseOptions.angularStiffness,stiffness:A.mouseOptions.stiffness}}),j.Composite.add(p.world,o),o.mouse.element.removeEventListener("mousewheel",o.mouse.mousewheel),o.mouse.element.removeEventListener("DOMMouseScroll",o.mouse.mousewheel),o.mouse.element.removeEventListener("touchstart",o.mouse.mousedown),o.mouse.element.removeEventListener("touchmove",o.mouse.mousemove),o.mouse.element.removeEventListener("touchend",o.mouse.mouseup),o.mouse.element.addEventListener("touchstart",o.mouse.mousedown,{passive:!0}),o.mouse.element.addEventListener("touchmove",c=>{o.body&&o.mouse.mousemove(c)}),o.mouse.element.addEventListener("touchend",c=>{o.body&&o.mouse.mouseup(c)}),e.current.addEventListener("mouseleave",()=>{o.mouse.mouseup(event)})}let u=we(e.current,p.world,e.current.children,A.frictionOptions,A.densityOptions);(function r(){requestAnimationFrame(r),u.bodies.forEach((c,i)=>{let t=e.current.children[i],{x:n,y:a}=c.vertices[0];t.style.visibility="visible",t.style.top=`${a}px`,t.style.left=`${n}px`,t.style.transform=`
                          translate(-50%, -50%)
                          rotate(${c.angle}rad) 
                          translate(50%, 50%)
                          `}),j.Engine.update(p)})()}},[]);let e=Y.useRef(null);return X("div",{style:Be,ref:e,draggable:"false",onDragStart:l=>{l.preventDefault()},children:((k=A.children)===null||k===void 0?void 0:k.length)>0?A.children.map((l,s)=>X("div",{style:Ce,id:"physics-body",draggable:"false",children:l})):X("div",{style:Ce,id:"physics-body",draggable:"false",children:A.children})})}var Be={height:"100%",width:"100%",overflow:"hidden"},Ce={position:"absolute",visibility:"hidden"};re.defaultProps={gravX:0,gravY:1,children:{},wallOptions:{top:!0,bottom:!0,right:!0,left:!0},frictionOptions:{friction:.1,frictionAir:.01},mouseOptions:{angularStiffnes:0,stiffness:.2,enable:!0},densityOptions:{enable:!0,density:.001},sleeping:!1};me(re,{children:{type:D.Array,control:{type:D.ComponentInstance}},gravY:{type:D.Number,defaultValue:1,max:5,min:-5,step:.25,title:"Gravity Y"},gravX:{type:D.Number,defaultValue:0,max:5,min:-5,step:.25,title:"Gravity X"},wallOptions:{title:"Walls",type:D.Object,controls:{top:{type:D.Boolean,defaultValue:!0},bottom:{type:D.Boolean,defaultValue:!0},right:{type:D.Boolean,defaultValue:!0},left:{type:D.Boolean,defaultValue:!0}}},mouseOptions:{title:"Mouse",type:D.Object,controls:{enable:{title:"Enable",type:D.Boolean,defaultValue:!0},angularStiffness:{title:"Angular stiffness",description:"A value of 0 allows objects to swing when held by the mouse",type:D.Number,defaultValue:0,min:0,max:1,step:.01},stiffness:{title:"Stiffness",description:"Click + drag creates a moving constraint (spring) that follows the mouse. This describes the stiffness of that spring",type:D.Number,defaultValue:.2,min:.001,max:1,step:.01}}},friction:{type:D.Object,controls:{friction:{title:"Body friction",type:D.Number,min:0,max:1,defaultValue:.1,step:.01},frictionAir:{title:"Air friction",type:D.Number,min:0,max:1,defaultValue:.01,step:.01}}},densityOptions:{title:"Density",type:D.Object,controls:{enable:{type:D.Boolean,defaultValue:!0,description:"Enabling density will cause mass to be calculated based on width and height"},density:{type:D.Number,defaultValue:.001,min:.001,max:1,step:.01}}},sleeping:{title:"Sleeping",description:"Improves performance at the cost of simulation accuracy",type:D.Boolean,defaultValue:!1}});export{ge as a,ee as b,We as c,He as d,re as e};
//# sourceMappingURL=chunk-Y5SKBTJN.mjs.map
